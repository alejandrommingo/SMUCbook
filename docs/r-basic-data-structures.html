<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.7 R Basic Data Structures | Simulation and Modeling to Understand the Change</title>
  <meta name="description" content="These are lecture notes for the module Simulation and Modelling to Understand Change given in the School of Human Sciences and Technology at IE University, Madrid, Spain. The module is given in the 2nd semester of the 1st year of the bachelor in Data and Business Analytics. Knowledge of basic elements of R programming as well as probability and statistics is assumed." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="2.7 R Basic Data Structures | Simulation and Modeling to Understand the Change" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/Rplot.png" />
  <meta property="og:description" content="These are lecture notes for the module Simulation and Modelling to Understand Change given in the School of Human Sciences and Technology at IE University, Madrid, Spain. The module is given in the 2nd semester of the 1st year of the bachelor in Data and Business Analytics. Knowledge of basic elements of R programming as well as probability and statistics is assumed." />
  <meta name="github-repo" content="alejandrommingo/SMUCbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.7 R Basic Data Structures | Simulation and Modeling to Understand the Change" />
  
  <meta name="twitter:description" content="These are lecture notes for the module Simulation and Modelling to Understand Change given in the School of Human Sciences and Technology at IE University, Madrid, Spain. The module is given in the 2nd semester of the 1st year of the bachelor in Data and Business Analytics. Knowledge of basic elements of R programming as well as probability and statistics is assumed." />
  <meta name="twitter:image" content="/images/Rplot.png" />

<meta name="author" content="Alejandro Martínez-Mingo &amp; Manuele Leonelli" />


<meta name="date" content="2022-02-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-basic-data-types.html"/>
<link rel="next" href="control-flow.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SMUC</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="what-is-simulation.html"><a href="what-is-simulation.html"><i class="fa fa-check"></i><b>1.1</b> What is simulation</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="what-is-simulation.html"><a href="what-is-simulation.html#a-simple-simulation-model"><i class="fa fa-check"></i><b>1.1.1</b> A simple simulation model</a></li>
<li class="chapter" data-level="1.1.2" data-path="what-is-simulation.html"><a href="what-is-simulation.html#why-simulate"><i class="fa fa-check"></i><b>1.1.2</b> Why simulate?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="types-of-simulations.html"><a href="types-of-simulations.html"><i class="fa fa-check"></i><b>1.2</b> Types of simulations</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="types-of-simulations.html"><a href="types-of-simulations.html#stochastic-vs-deterministic-simulations"><i class="fa fa-check"></i><b>1.2.1</b> Stochastic vs deterministic simulations</a></li>
<li class="chapter" data-level="1.2.2" data-path="types-of-simulations.html"><a href="types-of-simulations.html#static-vs-dynamic-simulations"><i class="fa fa-check"></i><b>1.2.2</b> Static vs dynamic simulations</a></li>
<li class="chapter" data-level="1.2.3" data-path="types-of-simulations.html"><a href="types-of-simulations.html#discrete-vs-continuous-simulations"><i class="fa fa-check"></i><b>1.2.3</b> Discrete vs continuous simulations</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="elements-of-a-simulation-model.html"><a href="elements-of-a-simulation-model.html"><i class="fa fa-check"></i><b>1.3</b> Elements of a simulation model</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="elements-of-a-simulation-model.html"><a href="elements-of-a-simulation-model.html#objects-of-the-model"><i class="fa fa-check"></i><b>1.3.1</b> Objects of the model</a></li>
<li class="chapter" data-level="1.3.2" data-path="elements-of-a-simulation-model.html"><a href="elements-of-a-simulation-model.html#organization-of-entities-and-resources"><i class="fa fa-check"></i><b>1.3.2</b> Organization of entities and resources</a></li>
<li class="chapter" data-level="1.3.3" data-path="elements-of-a-simulation-model.html"><a href="elements-of-a-simulation-model.html#operations-of-the-objects"><i class="fa fa-check"></i><b>1.3.3</b> Operations of the objects</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="the-donut-shop-example.html"><a href="the-donut-shop-example.html"><i class="fa fa-check"></i><b>1.4</b> The donut shop example</a></li>
<li class="chapter" data-level="1.5" data-path="simulating-a-little-health-center.html"><a href="simulating-a-little-health-center.html"><i class="fa fa-check"></i><b>1.5</b> Simulating a little health center</a></li>
<li class="chapter" data-level="1.6" data-path="whats-next.html"><a href="whats-next.html"><i class="fa fa-check"></i><b>1.6</b> What’s next</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-programming.html"><a href="r-programming.html"><i class="fa fa-check"></i><b>2</b> R programming</a>
<ul>
<li class="chapter" data-level="2.1" data-path="why-r.html"><a href="why-r.html"><i class="fa fa-check"></i><b>2.1</b> Why R?</a></li>
<li class="chapter" data-level="2.2" data-path="section-bibliography.html"><a href="section-bibliography.html"><i class="fa fa-check"></i><b>2.2</b> Section Bibliography</a></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2.3</b> R basics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-basics.html"><a href="r-basics.html#introduction-to-r"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to R</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-basics.html"><a href="r-basics.html#r-history"><i class="fa fa-check"></i><b>2.3.2</b> R History</a></li>
<li class="chapter" data-level="2.3.3" data-path="r-basics.html"><a href="r-basics.html#r-advantages"><i class="fa fa-check"></i><b>2.3.3</b> R Advantages</a></li>
<li class="chapter" data-level="2.3.4" data-path="r-basics.html"><a href="r-basics.html#what-do-we-mean-by-r"><i class="fa fa-check"></i><b>2.3.4</b> What do we mean by R?</a></li>
<li class="chapter" data-level="2.3.5" data-path="r-basics.html"><a href="r-basics.html#console-mode"><i class="fa fa-check"></i><b>2.3.5</b> Console Mode</a></li>
<li class="chapter" data-level="2.3.6" data-path="r-basics.html"><a href="r-basics.html#getting-help-in-r"><i class="fa fa-check"></i><b>2.3.6</b> Getting help in R</a></li>
<li class="chapter" data-level="2.3.7" data-path="r-basics.html"><a href="r-basics.html#packages-in-r"><i class="fa fa-check"></i><b>2.3.7</b> Packages in R</a></li>
<li class="chapter" data-level="2.3.8" data-path="r-basics.html"><a href="r-basics.html#built-in-r-libraries"><i class="fa fa-check"></i><b>2.3.8</b> Built-in R libraries</a></li>
<li class="chapter" data-level="2.3.9" data-path="r-basics.html"><a href="r-basics.html#contents-of-packages"><i class="fa fa-check"></i><b>2.3.9</b> Contents of Packages</a></li>
<li class="chapter" data-level="2.3.10" data-path="r-basics.html"><a href="r-basics.html#installing-packages"><i class="fa fa-check"></i><b>2.3.10</b> Installing Packages</a></li>
<li class="chapter" data-level="2.3.11" data-path="r-basics.html"><a href="r-basics.html#command-line-versus-scripts"><i class="fa fa-check"></i><b>2.3.11</b> Command line versus scripts</a></li>
<li class="chapter" data-level="2.3.12" data-path="r-basics.html"><a href="r-basics.html#rstudio"><i class="fa fa-check"></i><b>2.3.12</b> RStudio</a></li>
<li class="chapter" data-level="2.3.13" data-path="r-basics.html"><a href="r-basics.html#working-directory"><i class="fa fa-check"></i><b>2.3.13</b> Working Directory</a></li>
<li class="chapter" data-level="2.3.14" data-path="r-basics.html"><a href="r-basics.html#exercise-set-up-your-working-directory"><i class="fa fa-check"></i><b>2.3.14</b> Exercise: Set up your Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="expressions-objects-and-symbols.html"><a href="expressions-objects-and-symbols.html"><i class="fa fa-check"></i><b>2.4</b> Expressions, Objects and Symbols</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="expressions-objects-and-symbols.html"><a href="expressions-objects-and-symbols.html#some-examples-to-start-with"><i class="fa fa-check"></i><b>2.4.1</b> Some examples to start with</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html"><i class="fa fa-check"></i><b>2.5</b> R as a Calculator</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#complex-numbers-in-r"><i class="fa fa-check"></i><b>2.5.1</b> Complex numbers in R</a></li>
<li class="chapter" data-level="2.5.2" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#rounding"><i class="fa fa-check"></i><b>2.5.2</b> Rounding</a></li>
<li class="chapter" data-level="2.5.3" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#arithmetics"><i class="fa fa-check"></i><b>2.5.3</b> Arithmetics</a></li>
<li class="chapter" data-level="2.5.4" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#modulo-and-integer-quotients"><i class="fa fa-check"></i><b>2.5.4</b> Modulo and integer quotients</a></li>
<li class="chapter" data-level="2.5.5" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#operators"><i class="fa fa-check"></i><b>2.5.5</b> Operators</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html"><i class="fa fa-check"></i><b>2.6</b> R Basic Data types</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#integers"><i class="fa fa-check"></i><b>2.6.1</b> Integers</a></li>
<li class="chapter" data-level="2.6.2" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#integer-vs.-double"><i class="fa fa-check"></i><b>2.6.2</b> Integer vs. Double</a></li>
<li class="chapter" data-level="2.6.3" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#logical-operators"><i class="fa fa-check"></i><b>2.6.3</b> Logical operators</a></li>
<li class="chapter" data-level="2.6.4" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#real-numbers-equality"><i class="fa fa-check"></i><b>2.6.4</b> Real numbers equality</a></li>
<li class="chapter" data-level="2.6.5" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#logical-arithmetic"><i class="fa fa-check"></i><b>2.6.5</b> Logical arithmetic</a></li>
<li class="chapter" data-level="2.6.6" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters"><i class="fa fa-check"></i><b>2.6.6</b> Characters</a></li>
<li class="chapter" data-level="2.6.7" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters-letters-vectors"><i class="fa fa-check"></i><b>2.6.7</b> Characters: letters vectors</a></li>
<li class="chapter" data-level="2.6.8" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters-pasting-strings-together"><i class="fa fa-check"></i><b>2.6.8</b> Characters: Pasting strings together</a></li>
<li class="chapter" data-level="2.6.9" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters-extracting-parts-of-strings"><i class="fa fa-check"></i><b>2.6.9</b> Characters: Extracting parts of strings</a></li>
<li class="chapter" data-level="2.6.10" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters-counting-things-within-strings"><i class="fa fa-check"></i><b>2.6.10</b> Characters: Counting things within strings</a></li>
<li class="chapter" data-level="2.6.11" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#characters-upper--and-lower-case-text"><i class="fa fa-check"></i><b>2.6.11</b> Characters: Upper- and lower-case text</a></li>
<li class="chapter" data-level="2.6.12" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#dates-and-times"><i class="fa fa-check"></i><b>2.6.12</b> Dates and times</a></li>
<li class="chapter" data-level="2.6.13" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#dates-and-times-reading-time-data-from-files"><i class="fa fa-check"></i><b>2.6.13</b> Dates and times: Reading time data from files</a></li>
<li class="chapter" data-level="2.6.14" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#dates-and-times-the-strptime-function"><i class="fa fa-check"></i><b>2.6.14</b> Dates and times: The <code>strptime</code> function</a></li>
<li class="chapter" data-level="2.6.15" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#dates-and-times-summary"><i class="fa fa-check"></i><b>2.6.15</b> Dates and times: Summary</a></li>
<li class="chapter" data-level="2.6.16" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#testing-and-coercing"><i class="fa fa-check"></i><b>2.6.16</b> Testing and coercing</a></li>
<li class="chapter" data-level="2.6.17" data-path="r-basic-data-types.html"><a href="r-basic-data-types.html#missing-values-infinity-and-things-that-are-not-numbers"><i class="fa fa-check"></i><b>2.6.17</b> Missing values, infinity and things that are not numbers</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html"><i class="fa fa-check"></i><b>2.7</b> R Basic Data Structures</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#vectors"><i class="fa fa-check"></i><b>2.7.1</b> Vectors</a></li>
<li class="chapter" data-level="2.7.2" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#sequences"><i class="fa fa-check"></i><b>2.7.2</b> Sequences</a></li>
<li class="chapter" data-level="2.7.3" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#vector-and-subscripts"><i class="fa fa-check"></i><b>2.7.3</b> Vector and Subscripts</a></li>
<li class="chapter" data-level="2.7.4" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#vector-operations"><i class="fa fa-check"></i><b>2.7.4</b> Vector Operations</a></li>
<li class="chapter" data-level="2.7.5" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#vector-functions"><i class="fa fa-check"></i><b>2.7.5</b> Vector Functions</a></li>
<li class="chapter" data-level="2.7.6" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#sets"><i class="fa fa-check"></i><b>2.7.6</b> Sets</a></li>
<li class="chapter" data-level="2.7.7" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#factors"><i class="fa fa-check"></i><b>2.7.7</b> Factors</a></li>
<li class="chapter" data-level="2.7.8" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#matrices-and-arrays"><i class="fa fa-check"></i><b>2.7.8</b> Matrices and Arrays</a></li>
<li class="chapter" data-level="2.7.9" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#matrices"><i class="fa fa-check"></i><b>2.7.9</b> Matrices</a></li>
<li class="chapter" data-level="2.7.10" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#lists"><i class="fa fa-check"></i><b>2.7.10</b> Lists</a></li>
<li class="chapter" data-level="2.7.11" data-path="r-basic-data-structures.html"><a href="r-basic-data-structures.html#data-frames"><i class="fa fa-check"></i><b>2.7.11</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>2.8</b> Control Flow</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="control-flow.html"><a href="control-flow.html#conditional-statements"><i class="fa fa-check"></i><b>2.8.1</b> Conditional statements</a></li>
<li class="chapter" data-level="2.8.2" data-path="control-flow.html"><a href="control-flow.html#loops"><i class="fa fa-check"></i><b>2.8.2</b> Loops</a></li>
<li class="chapter" data-level="2.8.3" data-path="control-flow.html"><a href="control-flow.html#functions"><i class="fa fa-check"></i><b>2.8.3</b> Functions</a></li>
<li class="chapter" data-level="2.8.4" data-path="control-flow.html"><a href="control-flow.html#the-apply-family"><i class="fa fa-check"></i><b>2.8.4</b> The <code>apply</code> Family</a></li>
<li class="chapter" data-level="2.8.5" data-path="control-flow.html"><a href="control-flow.html#apply-family-examples"><i class="fa fa-check"></i><b>2.8.5</b> <code>apply</code> Family Examples</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="the-pipe-operator.html"><a href="the-pipe-operator.html"><i class="fa fa-check"></i><b>2.9</b> The pipe operator</a></li>
<li class="chapter" data-level="2.10" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>2.10</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="probability-basics.html"><a href="probability-basics.html"><i class="fa fa-check"></i><b>3</b> Probability Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="set-theory.html"><a href="set-theory.html"><i class="fa fa-check"></i><b>3.1</b> Set theory</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="set-theory.html"><a href="set-theory.html#sample-spaces"><i class="fa fa-check"></i><b>3.1.1</b> Sample Spaces</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>3.2</b> Probability</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="probability.html"><a href="probability.html#independence"><i class="fa fa-check"></i><b>3.2.1</b> Independence</a></li>
<li class="chapter" data-level="3.2.2" data-path="probability.html"><a href="probability.html#conditional-probabilities"><i class="fa fa-check"></i><b>3.2.2</b> Conditional Probabilities</a></li>
<li class="chapter" data-level="3.2.3" data-path="probability.html"><a href="probability.html#conditional-probabilities-and-independence"><i class="fa fa-check"></i><b>3.2.3</b> Conditional Probabilities and Independence</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="random-variables.html"><a href="random-variables.html"><i class="fa fa-check"></i><b>3.3</b> Random Variables</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="random-variables.html"><a href="random-variables.html#distribution-functions"><i class="fa fa-check"></i><b>3.3.1</b> Distribution Functions</a></li>
<li class="chapter" data-level="3.3.2" data-path="random-variables.html"><a href="random-variables.html#random-variable-types"><i class="fa fa-check"></i><b>3.3.2</b> Random variable types</a></li>
<li class="chapter" data-level="3.3.3" data-path="random-variables.html"><a href="random-variables.html#discrete-random-variables"><i class="fa fa-check"></i><b>3.3.3</b> Discrete Random Variables</a></li>
<li class="chapter" data-level="3.3.4" data-path="random-variables.html"><a href="random-variables.html#continuous-random-variables"><i class="fa fa-check"></i><b>3.3.4</b> Continuous Random Variables</a></li>
<li class="chapter" data-level="3.3.5" data-path="random-variables.html"><a href="random-variables.html#expectation-of-a-random-variable"><i class="fa fa-check"></i><b>3.3.5</b> Expectation of a Random Variable</a></li>
<li class="chapter" data-level="3.3.6" data-path="random-variables.html"><a href="random-variables.html#variance-of-random-variables"><i class="fa fa-check"></i><b>3.3.6</b> Variance of Random Variables</a></li>
<li class="chapter" data-level="3.3.7" data-path="random-variables.html"><a href="random-variables.html#sample-mean-and-sample-variance"><i class="fa fa-check"></i><b>3.3.7</b> Sample Mean and Sample Variance</a></li>
<li class="chapter" data-level="3.3.8" data-path="random-variables.html"><a href="random-variables.html#covariance-between-random-variables"><i class="fa fa-check"></i><b>3.3.8</b> Covariance between Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="discrete-random-variables-1.html"><a href="discrete-random-variables-1.html"><i class="fa fa-check"></i><b>3.4</b> Discrete Random Variables</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="discrete-random-variables-1.html"><a href="discrete-random-variables-1.html#probability-mass-function"><i class="fa fa-check"></i><b>3.4.1</b> Probability Mass Function</a></li>
<li class="chapter" data-level="3.4.2" data-path="discrete-random-variables-1.html"><a href="discrete-random-variables-1.html#cumulative-distribution-function"><i class="fa fa-check"></i><b>3.4.2</b> Cumulative Distribution Function</a></li>
<li class="chapter" data-level="3.4.3" data-path="discrete-random-variables-1.html"><a href="discrete-random-variables-1.html#summaries"><i class="fa fa-check"></i><b>3.4.3</b> Summaries</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html"><i class="fa fa-check"></i><b>3.5</b> Notable Discrete Variables</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html#bernoulli-distribution"><i class="fa fa-check"></i><b>3.5.1</b> Bernoulli Distribution</a></li>
<li class="chapter" data-level="3.5.2" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html#binomial-distribution"><i class="fa fa-check"></i><b>3.5.2</b> Binomial Distribution</a></li>
<li class="chapter" data-level="3.5.3" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html#geometric-distribution"><i class="fa fa-check"></i><b>3.5.3</b> Geometric distribution</a></li>
<li class="chapter" data-level="3.5.4" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html#poisson-distribution"><i class="fa fa-check"></i><b>3.5.4</b> Poisson Distribution</a></li>
<li class="chapter" data-level="3.5.5" data-path="notable-discrete-variables.html"><a href="notable-discrete-variables.html#some-examples"><i class="fa fa-check"></i><b>3.5.5</b> Some Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="continuous-random-variables-1.html"><a href="continuous-random-variables-1.html"><i class="fa fa-check"></i><b>3.6</b> Continuous Random Variables</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="continuous-random-variables-1.html"><a href="continuous-random-variables-1.html#probability-density-function"><i class="fa fa-check"></i><b>3.6.1</b> Probability Density Function</a></li>
<li class="chapter" data-level="3.6.2" data-path="continuous-random-variables-1.html"><a href="continuous-random-variables-1.html#cumulative-distribution-function-1"><i class="fa fa-check"></i><b>3.6.2</b> Cumulative Distribution Function</a></li>
<li class="chapter" data-level="3.6.3" data-path="continuous-random-variables-1.html"><a href="continuous-random-variables-1.html#summaries-1"><i class="fa fa-check"></i><b>3.6.3</b> Summaries</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="notable-continuous-distribution.html"><a href="notable-continuous-distribution.html"><i class="fa fa-check"></i><b>3.7</b> Notable Continuous Distribution</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="notable-continuous-distribution.html"><a href="notable-continuous-distribution.html#uniform-distribution"><i class="fa fa-check"></i><b>3.7.1</b> Uniform Distribution</a></li>
<li class="chapter" data-level="3.7.2" data-path="notable-continuous-distribution.html"><a href="notable-continuous-distribution.html#exponential-distribution"><i class="fa fa-check"></i><b>3.7.2</b> Exponential Distribution</a></li>
<li class="chapter" data-level="3.7.3" data-path="notable-continuous-distribution.html"><a href="notable-continuous-distribution.html#normal-distribution"><i class="fa fa-check"></i><b>3.7.3</b> Normal Distribution</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="the-central-limit-theorem.html"><a href="the-central-limit-theorem.html"><i class="fa fa-check"></i><b>3.8</b> The Central Limit Theorem</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-number-generation.html"><a href="random-number-generation.html"><i class="fa fa-check"></i><b>4</b> Random Number Generation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="properties-of-random-numbers.html"><a href="properties-of-random-numbers.html"><i class="fa fa-check"></i><b>4.1</b> Properties of Random Numbers</a></li>
<li class="chapter" data-level="4.2" data-path="pseudo-random-numbers.html"><a href="pseudo-random-numbers.html"><i class="fa fa-check"></i><b>4.2</b> Pseudo Random Numbers</a></li>
<li class="chapter" data-level="4.3" data-path="generating-pseudo-random-numbers.html"><a href="generating-pseudo-random-numbers.html"><i class="fa fa-check"></i><b>4.3</b> Generating Pseudo-Random Numbers</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="generating-pseudo-random-numbers.html"><a href="generating-pseudo-random-numbers.html#generating-pseudo-random-numbers-in-r"><i class="fa fa-check"></i><b>4.3.1</b> Generating Pseudo-Random Numbers in R</a></li>
<li class="chapter" data-level="4.3.2" data-path="generating-pseudo-random-numbers.html"><a href="generating-pseudo-random-numbers.html#linear-congruential-method"><i class="fa fa-check"></i><b>4.3.2</b> Linear Congruential Method</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="testing-randomness.html"><a href="testing-randomness.html"><i class="fa fa-check"></i><b>4.4</b> Testing Randomness</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="testing-randomness.html"><a href="testing-randomness.html#testing-uniformity"><i class="fa fa-check"></i><b>4.4.1</b> Testing Uniformity</a></li>
<li class="chapter" data-level="4.4.2" data-path="testing-randomness.html"><a href="testing-randomness.html#testing-independence"><i class="fa fa-check"></i><b>4.4.2</b> Testing Independence</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="random-variate-generation.html"><a href="random-variate-generation.html"><i class="fa fa-check"></i><b>4.5</b> Random Variate Generation</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="random-variate-generation.html"><a href="random-variate-generation.html#random-generation-in-r"><i class="fa fa-check"></i><b>4.5.1</b> Random Generation in R</a></li>
<li class="chapter" data-level="4.5.2" data-path="random-variate-generation.html"><a href="random-variate-generation.html#the-inverse-transform-method"><i class="fa fa-check"></i><b>4.5.2</b> The Inverse Transform Method</a></li>
<li class="chapter" data-level="4.5.3" data-path="random-variate-generation.html"><a href="random-variate-generation.html#simulating-bernoulli-and-binomial"><i class="fa fa-check"></i><b>4.5.3</b> Simulating Bernoulli and Binomial</a></li>
<li class="chapter" data-level="4.5.4" data-path="random-variate-generation.html"><a href="random-variate-generation.html#simulating-other-distributions"><i class="fa fa-check"></i><b>4.5.4</b> Simulating Other Distributions</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="testing-generic-simulation-sequences.html"><a href="testing-generic-simulation-sequences.html"><i class="fa fa-check"></i><b>4.6</b> Testing Generic Simulation Sequences</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="testing-generic-simulation-sequences.html"><a href="testing-generic-simulation-sequences.html#testing-distribution-fit"><i class="fa fa-check"></i><b>4.6.1</b> Testing Distribution Fit</a></li>
<li class="chapter" data-level="4.6.2" data-path="testing-generic-simulation-sequences.html"><a href="testing-generic-simulation-sequences.html#testing-independence-1"><i class="fa fa-check"></i><b>4.6.2</b> Testing Independence</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>5</b> Monte Carlo Simulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="what-does-monte-carlo-simulation-mean.html"><a href="what-does-monte-carlo-simulation-mean.html"><i class="fa fa-check"></i><b>5.1</b> What does Monte Carlo simulation mean?</a></li>
<li class="chapter" data-level="5.2" data-path="a-bit-of-history.html"><a href="a-bit-of-history.html"><i class="fa fa-check"></i><b>5.2</b> A bit of history</a></li>
<li class="chapter" data-level="5.3" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html"><i class="fa fa-check"></i><b>5.3</b> Steps of Monte Carlo simulation</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-step-1"><i class="fa fa-check"></i><b>5.3.1</b> Estimating <span class="math inline">\(\pi\)</span>: step 1</a></li>
<li class="chapter" data-level="5.3.2" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-step-2"><i class="fa fa-check"></i><b>5.3.2</b> Estimating <span class="math inline">\(\pi\)</span>: step 2</a></li>
<li class="chapter" data-level="5.3.3" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-step-3"><i class="fa fa-check"></i><b>5.3.3</b> Estimating <span class="math inline">\(\pi\)</span>: step 3</a></li>
<li class="chapter" data-level="5.3.4" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-step-4"><i class="fa fa-check"></i><b>5.3.4</b> Estimating <span class="math inline">\(\pi\)</span>: step 4</a></li>
<li class="chapter" data-level="5.3.5" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-step-5"><i class="fa fa-check"></i><b>5.3.5</b> Estimating <span class="math inline">\(\pi\)</span>: step 5</a></li>
<li class="chapter" data-level="5.3.6" data-path="steps-of-monte-carlo-simulation.html"><a href="steps-of-monte-carlo-simulation.html#estimating-pi-conclusions"><i class="fa fa-check"></i><b>5.3.6</b> Estimating <span class="math inline">\(\pi\)</span>: conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-sample-function.html"><a href="the-sample-function.html"><i class="fa fa-check"></i><b>5.4</b> The <code>sample</code> function</a></li>
<li class="chapter" data-level="5.5" data-path="a-game-of-chance.html"><a href="a-game-of-chance.html"><i class="fa fa-check"></i><b>5.5</b> A game of chance</a></li>
<li class="chapter" data-level="5.6" data-path="takeaways.html"><a href="takeaways.html"><i class="fa fa-check"></i><b>5.6</b> Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="monte-carlo-methods-for-inference.html"><a href="monte-carlo-methods-for-inference.html"><i class="fa fa-check"></i><b>6</b> Monte Carlo methods for inference</a>
<ul>
<li class="chapter" data-level="6.1" data-path="monte-carlo-for-estimation.html"><a href="monte-carlo-for-estimation.html"><i class="fa fa-check"></i><b>6.1</b> Monte Carlo for estimation</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="monte-carlo-for-estimation.html"><a href="monte-carlo-for-estimation.html#sam-and-annie-from-sleepless-in-seattle"><i class="fa fa-check"></i><b>6.1.1</b> Sam and Annie from ‘Sleepless in Seattle’</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="general-case-with-standard-normal-distributions.html"><a href="general-case-with-standard-normal-distributions.html"><i class="fa fa-check"></i><b>6.2</b> General Case with Standard Normal Distributions</a></li>
<li class="chapter" data-level="6.3" data-path="the-taxi-problem-comparing-estimators.html"><a href="the-taxi-problem-comparing-estimators.html"><i class="fa fa-check"></i><b>6.3</b> The taxi problem (comparing estimators)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discrete-events-simulation-with-r.html"><a href="discrete-events-simulation-with-r.html"><i class="fa fa-check"></i><b>7</b> Discrete Events Simulation with R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="simmer-terminology.html"><a href="simmer-terminology.html"><i class="fa fa-check"></i><b>7.1</b> <code>simmer</code> terminology</a></li>
<li class="chapter" data-level="7.2" data-path="the-trajectory-object.html"><a href="the-trajectory-object.html"><i class="fa fa-check"></i><b>7.2</b> The Trajectory Object</a></li>
<li class="chapter" data-level="7.3" data-path="the-simulation-enviroment.html"><a href="the-simulation-enviroment.html"><i class="fa fa-check"></i><b>7.3</b> The Simulation Enviroment</a></li>
<li class="chapter" data-level="7.4" data-path="monitoring-and-data-retrieval.html"><a href="monitoring-and-data-retrieval.html"><i class="fa fa-check"></i><b>7.4</b> Monitoring and data retrieval</a></li>
<li class="chapter" data-level="7.5" data-path="simmer-example.html"><a href="simmer-example.html"><i class="fa fa-check"></i><b>7.5</b> <code>simmer</code> Example</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Simulation and Modeling to Understand the Change</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-basic-data-structures" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> R Basic Data Structures</h2>
<div id="vectors" class="section level3" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Vectors</h3>
<p>A vector is a variable with one or more values of the same type (atomic one dimensional arrays). For instance, the numbers of peas in six pods were 4, 7, 6, 5, 6 and 7. The vector called peas is one object of <code>length = 6</code>. In this case, the class of the object is numeric. The easiest way to create a vector in R is to concatenate (link together) the six values using the concatenate function, <code>c</code>, like this:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="r-basic-data-structures.html#cb281-1" aria-hidden="true" tabindex="-1"></a>peas <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span></code></pre></div>
<p>We can ask all sorts of questions about the vector called peas. For instance, what type of vector is it?</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="r-basic-data-structures.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(peas)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>How big is the vector?</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="r-basic-data-structures.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(peas)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>The great advantage of a vector-based language is that it is very simple to ask quite involved questions that involve all of the values in the vector. These vector functions are often self-explanatory:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="r-basic-data-structures.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(peas)</span></code></pre></div>
<pre><code>## [1] 5.833333</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="r-basic-data-structures.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(peas)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="r-basic-data-structures.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(peas)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Another way to create a vector is to input data from the keyboard using the function called <code>scan</code>:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="r-basic-data-structures.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co">#peas = scan()</span></span></code></pre></div>
<p>The prompt appears <code>1:</code> which means type in the first number of peas (4) then press the return key, then the prompt <code>2:</code> appears (you type in 7) and so on. When you have typed in all six values, and the prompt <code>7:</code> has appeared, you just press the return key to tell R that the vector is now complete. R replies by telling you how many items it has read:</p>
<pre><code>Read 6 items</code></pre>
<p>As we explained, vectors are single-dimensional arrays. The array indexes range from 1 to the vector length, <code>length(v)</code>. Vectors are also known as atomic vectors.</p>
<p>All elements of the vector are of the same basic type:</p>
<ul>
<li>logical</li>
<li>integer</li>
<li>double</li>
<li>character</li>
<li>complex</li>
</ul>
<p>It has a fixed size that is fixed in its creation. The simplest way to create a vector is by using the combination function <code>c(v1, v2,...)</code>. To name the elements of a vector we use the function <code>names(v)</code>. Here you have some different ways to create vectors in R:</p>
<ul>
<li>Using the <code>vector</code> function</li>
</ul>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="r-basic-data-structures.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logical Vector</span></span>
<span id="cb294-2"><a href="r-basic-data-structures.html#cb294-2" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&#39;logical&#39;</span>, <span class="at">length =</span> <span class="dv">4</span>)</span>
<span id="cb294-3"><a href="r-basic-data-structures.html#cb294-3" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="r-basic-data-structures.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Integer vector</span></span>
<span id="cb296-2"><a href="r-basic-data-structures.html#cb296-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&#39;integer&#39;</span>, <span class="at">length =</span> <span class="dv">4</span>)</span>
<span id="cb296-3"><a href="r-basic-data-structures.html#cb296-3" aria-hidden="true" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>## [1] 0 0 0 0</code></pre>
<ul>
<li>Using the “type” function</li>
</ul>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="r-basic-data-structures.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numeric vector</span></span>
<span id="cb298-2"><a href="r-basic-data-structures.html#cb298-2" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">=</span> <span class="fu">numeric</span>(<span class="dv">4</span>)</span>
<span id="cb298-3"><a href="r-basic-data-structures.html#cb298-3" aria-hidden="true" tabindex="-1"></a>v3</span></code></pre></div>
<pre><code>## [1] 0 0 0 0</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="r-basic-data-structures.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Character vector</span></span>
<span id="cb300-2"><a href="r-basic-data-structures.html#cb300-2" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">=</span> <span class="fu">character</span>(<span class="dv">4</span>)</span>
<span id="cb300-3"><a href="r-basic-data-structures.html#cb300-3" aria-hidden="true" tabindex="-1"></a>v4</span></code></pre></div>
<pre><code>## [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</code></pre>
</div>
<div id="sequences" class="section level3" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Sequences</h3>
<p>An important way of creating vectors is to generate a sequence of numbers. The simplest sequences are in steps of 1, and the colon operator is the simplest way of generating such sequences. All you do is specify the first and last values separated by a colon. Here is a sequence from 0 up to 10:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="r-basic-data-structures.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  0  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Here is a sequence from 15 down to 5:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="r-basic-data-structures.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span><span class="sc">:</span><span class="dv">5</span></span></code></pre></div>
<pre><code>##  [1] 15 14 13 12 11 10  9  8  7  6  5</code></pre>
<p>To generate a sequence in steps other than 1, you use the seq function. There are various forms of this, of which the simplest has three arguments: <code>from</code>, <code>to</code>, <code>by</code> (the initial value, the final value and the increment). If the initial value is smaller than the final value, the increment should be positive, like this:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="r-basic-data-structures.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">1.5</span>, <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>##  [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 1.1 1.2 1.3 1.4 1.5</code></pre>
<p>If the initial value is larger than the final value, the increment should be negative, like this:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="r-basic-data-structures.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">6</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>##  [1] 6.0 5.8 5.6 5.4 5.2 5.0 4.8 4.6 4.4 4.2 4.0</code></pre>
<p>In many cases, you want to generate a sequence to match an existing vector in length. Rather than having to figure out the increment that will get from the initial to the final value and produce a vector of exactly the appropriate length, R provides the <code>along</code> and <code>length</code> options. Suppose you have a vector of population sizes:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="r-basic-data-structures.html#cb310-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">55</span>,<span class="dv">76</span>,<span class="dv">92</span>,<span class="dv">103</span>,<span class="dv">84</span>,<span class="dv">88</span>,<span class="dv">121</span>,<span class="dv">91</span>,<span class="dv">65</span>,<span class="dv">77</span>,<span class="dv">99</span>)</span></code></pre></div>
<p>You need to plot this against a sequence that starts at 0.04 in steps of 0.01:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="r-basic-data-structures.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="fl">0.04</span>,<span class="at">by=</span><span class="fl">0.01</span>,<span class="at">length=</span><span class="dv">11</span>)</span></code></pre></div>
<pre><code>##  [1] 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14</code></pre>
<p>But this requires you to figure out the length of <code>N</code>. A simpler method is to use the <code>along</code> argument and specify the vector, <code>N</code>, whose length has to be matched:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="r-basic-data-structures.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fl">0.04</span>,<span class="at">by=</span><span class="fl">0.01</span>,<span class="at">along=</span>N)</span></code></pre></div>
<pre><code>##  [1] 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14</code></pre>
<p>Alternatively, you can get R to work out the increment (0.01 in this example), by specifying the start and the end values (<code>from</code> and <code>to</code>), and the name of the vector (<code>N</code>) whose length has to be matched:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="r-basic-data-structures.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="fl">0.04</span>,<span class="at">to=</span><span class="fl">0.14</span>,<span class="at">along=</span>N)</span></code></pre></div>
<pre><code>##  [1] 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14</code></pre>
<p>If you want a vector made up of sequences of unequal lengths, then use the sequence function. Suppose that most of the five sequences you want to string together are from 1 to 4, but the second one is 1 to 3 and the last one is 1 to 5, then:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="r-basic-data-structures.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sequence</span>(<span class="at">nvec =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>), <span class="at">from =</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 1 2 3 1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 5</code></pre>
<div id="generating-repeats" class="section level4" number="2.7.2.1">
<h4><span class="header-section-number">2.7.2.1</span> Generating repeats</h4>
<p>You will often want to generate repeats of numbers or characters, for which the function is <code>rep</code>. The object that is named in the first argument is repeated a number of times as specified in the second argument. At its simplest, we would generate five 9s like this:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="r-basic-data-structures.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">9</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 9 9 9 9 9</code></pre>
<p>You can see the issues involved by a comparison of these three increasingly complicated uses of the <code>rep</code> function:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="r-basic-data-structures.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 1 2 3 4</code></pre>
<p>In the simplest case, the entire first argument is repeated (i.e. the sequence 1 to 4 appears twice).</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="r-basic-data-structures.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 1 2 2 3 3 4 4</code></pre>
<p>You often want each element of the sequence to be repeated, and this is accomplished with the each argument.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="r-basic-data-structures.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4</code></pre>
<p>Finally, you might want each number repeated and the whole series repeated a certain number of times (here three times).</p>
<p>When each element of the series is to be repeated a different number of times, then the second argument must be a vector of the same length as the vector comprising the first argument (length 4 in this example). So if we want one 1, two 2s, three 3s and four 4s we would write:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="r-basic-data-structures.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 2 3 3 3 4 4 4 4</code></pre>
<p>In a more complicated case, there is a different but irregular repeat of each of the elements of the first argument. Suppose that we need four 1s, one 2, four 3s and two 4s. Then we use the concatenation function <code>c</code> to create a vector of length 4 <code>c(4,1,4,2)</code> which will act as the second argument to the <code>rep</code> function:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="r-basic-data-structures.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>))</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 2 3 3 3 3 4 4</code></pre>
<p>Here is the most complex case with character data rather than numbers: each element of the series is repeated an irregular number of times:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="r-basic-data-structures.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;gerbil&quot;</span>, <span class="st">&quot;goldfish&quot;</span>, <span class="st">&quot;rat&quot;</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;cat&quot;      &quot;cat&quot;      &quot;dog&quot;      &quot;dog&quot;      &quot;dog&quot;      &quot;gerbil&quot;  
##  [7] &quot;gerbil&quot;   &quot;goldfish&quot; &quot;rat&quot;      &quot;rat&quot;      &quot;rat&quot;</code></pre>
<p>This is the most general, and also the most useful form of the <code>rep</code> function.</p>
</div>
<div id="generating-factor-levels" class="section level4" number="2.7.2.2">
<h4><span class="header-section-number">2.7.2.2</span> Generating Factor Levels</h4>
<p>The function gl (‘generate levels’) is useful when you want to encode long vectors of factor levels. The syntax for the three arguments is: ‘up to,’ ‘with repeats of,’ ‘to total length.’ Here is the simplest case where we want factor levels up to 4 with repeats of 3 repeated only once (i.e. to total length 12):</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="r-basic-data-structures.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gl</span>(<span class="dv">4</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 3 3 3 4 4 4
## Levels: 1 2 3 4</code></pre>
<p>Here is the function when we want that whole pattern repeated twice:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="r-basic-data-structures.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gl</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">24</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 3 3 3 4 4 4 1 1 1 2 2 2 3 3 3 4 4 4
## Levels: 1 2 3 4</code></pre>
<p>If you want text for the factor levels, rather than numbers, use labels like this:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="r-basic-data-structures.html#cb337-1" aria-hidden="true" tabindex="-1"></a>Temp <span class="ot">=</span> <span class="fu">gl</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">24</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))</span>
<span id="cb337-2"><a href="r-basic-data-structures.html#cb337-2" aria-hidden="true" tabindex="-1"></a>Soft <span class="ot">=</span> <span class="fu">gl</span>(<span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">24</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Hard&quot;</span>,<span class="st">&quot;Medium&quot;</span>,<span class="st">&quot;Soft&quot;</span>))</span>
<span id="cb337-3"><a href="r-basic-data-structures.html#cb337-3" aria-hidden="true" tabindex="-1"></a>M.user <span class="ot">=</span> <span class="fu">gl</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">24</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;Y&quot;</span>))</span>
<span id="cb337-4"><a href="r-basic-data-structures.html#cb337-4" aria-hidden="true" tabindex="-1"></a>Brand <span class="ot">=</span> <span class="fu">gl</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">24</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;M&quot;</span>))</span>
<span id="cb337-5"><a href="r-basic-data-structures.html#cb337-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(Temp,Soft,M.user,Brand)</span></code></pre></div>
<pre><code>##    Temp   Soft M.user Brand
## 1   Low   Hard      N     X
## 2   Low   Hard      N     M
## 3  High   Hard      N     X
## 4  High   Hard      N     M
## 5   Low   Hard      Y     X
## 6   Low   Hard      Y     M
## 7  High   Hard      Y     X
## 8  High   Hard      Y     M
## 9   Low Medium      N     X
## 10  Low Medium      N     M
## 11 High Medium      N     X
## 12 High Medium      N     M
## 13  Low Medium      Y     X
## 14  Low Medium      Y     M
## 15 High Medium      Y     X
## 16 High Medium      Y     M
## 17  Low   Soft      N     X
## 18  Low   Soft      N     M
## 19 High   Soft      N     X
## 20 High   Soft      N     M
## 21  Low   Soft      Y     X
## 22  Low   Soft      Y     M
## 23 High   Soft      Y     X
## 24 High   Soft      Y     M</code></pre>
</div>
</div>
<div id="vector-and-subscripts" class="section level3" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Vector and Subscripts</h3>
<p>You will often want to use some but not all of the contents of a vector. To do this, you need to master the use of subscripts (or indices as they are also known). In R, subscripts involve the use of square brackets <code>[]</code>. Our vector called <code>peas</code> shows the numbers of peas in six pods:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="r-basic-data-structures.html#cb339-1" aria-hidden="true" tabindex="-1"></a>peas <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span></code></pre></div>
<p>The first element of <code>peas</code> is 4, the second 7, and so on. The elements are indexed left to right, 1 to 6. It could not be more straightforward. If we want to extract the fourth element of peas (which you can see is a 5) then this is what we do:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="r-basic-data-structures.html#cb340-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>If we want to extract several values (say the 2nd, 3rd and 6th) we use a vector to specify the pods we want as subscripts, either in two stages like this:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="r-basic-data-structures.html#cb342-1" aria-hidden="true" tabindex="-1"></a>pods <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">6</span>)</span>
<span id="cb342-2"><a href="r-basic-data-structures.html#cb342-2" aria-hidden="true" tabindex="-1"></a>peas[pods]</span></code></pre></div>
<pre><code>## [1] 7 6 7</code></pre>
<p>or in a single step, like this:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="r-basic-data-structures.html#cb344-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">6</span>)]</span></code></pre></div>
<pre><code>## [1] 7 6 7</code></pre>
<p>You can drop values from a vector by using negative subscripts. Here are all but the first values of peas:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="r-basic-data-structures.html#cb346-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 7 6 5 6 7</code></pre>
<p>Here are all but the last (note the use of the <code>length</code> function to decide what is last):</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="r-basic-data-structures.html#cb348-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="sc">-</span><span class="fu">length</span>(peas)]</span></code></pre></div>
<pre><code>## [1] 4 7 6 5 6</code></pre>
<p>We can use sequences of numbers to extract values from a vector. Here are the first three values of <code>peas</code>:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="r-basic-data-structures.html#cb350-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 4 7 6</code></pre>
<p>Here are the even-numbered values of <code>peas</code>:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="r-basic-data-structures.html#cb352-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="fu">seq</span>(<span class="dv">2</span>,<span class="fu">length</span>(peas), <span class="dv">2</span>)]</span></code></pre></div>
<pre><code>## [1] 7 5 7</code></pre>
<p>or alternatively:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="r-basic-data-structures.html#cb354-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(peas) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>]</span></code></pre></div>
<pre><code>## [1] 7 5 7</code></pre>
<p>Using the modulo function %% on the sequence 1 to 6 to extract the even numbers 2, 4 and 6. Finally, we can assign some value to the elements between some specific indices</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="r-basic-data-structures.html#cb356-1" aria-hidden="true" tabindex="-1"></a>peas[<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb356-2"><a href="r-basic-data-structures.html#cb356-2" aria-hidden="true" tabindex="-1"></a>peas</span></code></pre></div>
<pre><code>## [1] 4 7 6 0 0 7</code></pre>
<div id="classes-of-vector" class="section level4" number="2.7.3.1">
<h4><span class="header-section-number">2.7.3.1</span> Classes of vector</h4>
<p>The vector called <code>peas</code> contained numbers: in the jargon, it is of class numeric. R allows vectors of six types, so long as all of the elements in one vector belong to the same class. The classes are logical, integer, real, complex, string (or character) or raw. You will use numeric, logical and character variables all the time. Engineers and mathematicians will use complex numbers. But you could go a whole career without ever needing to use integer or raw.</p>
</div>
<div id="naming-elements-within-vectors" class="section level4" number="2.7.3.2">
<h4><span class="header-section-number">2.7.3.2</span> Naming elements within vectors</h4>
<p>It is often useful to have the values in a vector labelled in some way. For instance, if our data are counts of 0, 1, 2, . . . occurrences in a vector called <code>counts</code>,</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="r-basic-data-structures.html#cb358-1" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">12</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>)</span></code></pre></div>
<p>so that there were 25 zeros, 12 ones and so on, it would be useful to name each of the counts with the relevant number 0 to 8:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="r-basic-data-structures.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(counts) <span class="ot">=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">8</span></span></code></pre></div>
<p>Now when we inspect the vector called counts we see both the names and the frequencies:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="r-basic-data-structures.html#cb360-1" aria-hidden="true" tabindex="-1"></a>counts</span></code></pre></div>
<pre><code>##  0  1  2  3  4  5  6  7  8 
## 25 12  7  4  6  2  1  0  2</code></pre>
<p>Or even access to some element using its name:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="r-basic-data-structures.html#cb362-1" aria-hidden="true" tabindex="-1"></a>counts[<span class="st">&quot;0&quot;</span>]</span></code></pre></div>
<pre><code>##  0 
## 25</code></pre>
</div>
<div id="working-with-logical-subscripts" class="section level4" number="2.7.3.3">
<h4><span class="header-section-number">2.7.3.3</span> Working with logical subscripts</h4>
<p>Take the example of a vector containing the 11 numbers 0 to 10:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="r-basic-data-structures.html#cb364-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<p>There are two quite different kinds of things we might want to do with this. We might want to add up the values of the elements:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="r-basic-data-structures.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<p>Alternatively, we might want to count the elements that passed some logical criterion. Suppose we wanted to know how many of the values were less than 5:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="r-basic-data-structures.html#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">&lt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>You see the distinction. We use the vector function <code>sum</code> in both cases. But <code>sum(x)</code> adds up the values of the x’s and <code>sum(x&lt;5)</code> counts up the number of cases that pass the logical condition ‘x is less than 5.’ This works because of coercion. Logical <code>TRUE</code> has been coerced to numeric 1 and logical <code>FALSE</code> has been coerced to numeric 0.</p>
<p>How do you add up the values of just some of the elements of x? We specify a logical condition, but we do not want to count the number of cases that pass the condition, we want to add up all the values of the cases that pass.</p>
<p>Note that when we counted the number of cases, the counting was applied to the entire vector, using <code>sum(x&lt;5)</code>. To find the sum of the values of x that are less than 5, we write:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="r-basic-data-structures.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x[x<span class="sc">&lt;</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Let us look at this in more detail. The logical condition <code>x&lt;5</code> is either true or false:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="r-basic-data-structures.html#cb371-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">&lt;</span><span class="dv">5</span></span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>You can imagine false as being numeric 0 and true as being numeric 1. Then the vector of subscripts <code>[x&lt;5]</code> is five 1s followed by six 0s:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="r-basic-data-structures.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(x<span class="sc">&lt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 0 0 0 0 0 0</code></pre>
<p>Now imagine multiplying the values of x by the values of the logical vector</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="r-basic-data-structures.html#cb375-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">*</span>(x<span class="sc">&lt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 0 1 2 3 4 0 0 0 0 0 0</code></pre>
<p>When the function <code>sum</code> is applied, it gives us the answer we want: the sum of the values of the numbers 0 + 1 + 2 + 3 + 4 = 10.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="r-basic-data-structures.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">*</span>(x<span class="sc">&lt;</span><span class="dv">5</span>))</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>This produces the same answer as <code>sum(x[x&lt;5])</code>, but is rather less elegant. There are many other ways of indexing elements of a vector using logical operators. We have a vector with values between 0 and 100:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="r-basic-data-structures.html#cb379-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">100</span></span></code></pre></div>
<p>We can select all the elements over 30:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="r-basic-data-structures.html#cb380-1" aria-hidden="true" tabindex="-1"></a>v[v<span class="sc">&gt;</span><span class="dv">30</span>]</span></code></pre></div>
<pre><code>##  [1]  31  32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49
## [20]  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
## [39]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87
## [58]  88  89  90  91  92  93  94  95  96  97  98  99 100</code></pre>
<p>even, all those over 30 and under or equal 50:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="r-basic-data-structures.html#cb382-1" aria-hidden="true" tabindex="-1"></a>v[v <span class="sc">&gt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> v <span class="sc">&lt;=</span> <span class="dv">50</span>]</span></code></pre></div>
<pre><code>##  [1] 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</code></pre>
<p>Finally, we can use a specific set of elements to select those from the vector:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="r-basic-data-structures.html#cb384-1" aria-hidden="true" tabindex="-1"></a>v[ v <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)]</span></code></pre></div>
<pre><code>## [1] 10 20 30</code></pre>
</div>
</div>
<div id="vector-operations" class="section level3" number="2.7.4">
<h3><span class="header-section-number">2.7.4</span> Vector Operations</h3>
<p>When arithmetic operations are performed between two vectors, R returns another vector with the results of the element by element operation. Boolean operations are also possible. Most functions and operations are “vectorized.”</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="r-basic-data-structures.html#cb386-1" aria-hidden="true" tabindex="-1"></a>avector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb386-2"><a href="r-basic-data-structures.html#cb386-2" aria-hidden="true" tabindex="-1"></a>bvector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span></code></pre></div>
<p>If we sum up the two vectors the result will be a new vector with the sum of the elements with the same index:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="r-basic-data-structures.html#cb387-1" aria-hidden="true" tabindex="-1"></a>avector <span class="sc">+</span> bvector</span></code></pre></div>
<pre><code>## [1] 5 7 9</code></pre>
<p>If the vectors are not the same size, R repeats the smallest of them as many times as necessary.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="r-basic-data-structures.html#cb389-1" aria-hidden="true" tabindex="-1"></a>avector <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 2 3 4</code></pre>
<p>Vectors multiplication will follow the same rule, as the multiplication by an scalar:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="r-basic-data-structures.html#cb391-1" aria-hidden="true" tabindex="-1"></a>avector <span class="sc">*</span> bvector</span></code></pre></div>
<pre><code>## [1]  4 10 18</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="r-basic-data-structures.html#cb393-1" aria-hidden="true" tabindex="-1"></a>avector<span class="sc">*</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<p>If we want to multiplicate vectors as one-dimensional matrices (dot product) we need to use a different sintax:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="r-basic-data-structures.html#cb395-1" aria-hidden="true" tabindex="-1"></a>avector <span class="sc">%*%</span> bvector</span></code></pre></div>
<pre><code>##      [,1]
## [1,]   32</code></pre>
<p>In this case we obtained an scalar because the inner product was computed, but we can transpose one of the vectors to obtain the outer product using the <code>t()</code> function:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="r-basic-data-structures.html#cb397-1" aria-hidden="true" tabindex="-1"></a>avector <span class="sc">%*%</span> <span class="fu">t</span>(bvector)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    4    5    6
## [2,]    8   10   12
## [3,]   12   15   18</code></pre>
</div>
<div id="vector-functions" class="section level3" number="2.7.5">
<h3><span class="header-section-number">2.7.5</span> Vector Functions</h3>
<p>One of R’s great strengths is its ability to evaluate functions over entire vectors, thereby avoiding the need for loops and subscripts. The most important vector functions are listed in Table 2.4.</p>
<p align="center">
<img src="images/R-programming/table2.4.png" width="1050">
</p>
<p>Here is a numeric vector:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="r-basic-data-structures.html#cb399-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">4</span>,<span class="dv">11</span>)</span></code></pre></div>
<p>Some vector functions produce a single number:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="r-basic-data-structures.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y)</span></code></pre></div>
<pre><code>## [1] 6.333333</code></pre>
<p>Others produce two numbers:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="r-basic-data-structures.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(y)</span></code></pre></div>
<pre><code>## [1]  2 11</code></pre>
<p>here showing that the minimum was 2 and the maximum was 11. Other functions produce several numbers:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="r-basic-data-structures.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fivenum</span>(y)</span></code></pre></div>
<pre><code>## [1]  2.0  4.0  6.0  8.5 11.0</code></pre>
<p>This is Tukey’s famous five-number summary: the minimum, the lower hinge, the median, the upper hinge and the maximum.</p>
<p>Perhaps the single most useful vector function in R is <code>table</code>. You need to see it in action to appreciate just how good it is. Here is a huge vector called <code>counts</code> containing 10 000 random integers between 0 and 10 from a uniform distribution</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="r-basic-data-structures.html#cb406-1" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">=</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="dv">10000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Here is a look at the first 30 values in counts:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="r-basic-data-structures.html#cb407-1" aria-hidden="true" tabindex="-1"></a>counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>]</span></code></pre></div>
<pre><code>##  [1] 10  7  9  7  3  4  7  1  5  7  1  3  4  1  6  5  7  5 10  5  6  8  2  3  3
## [26]  7  1  8  2  5</code></pre>
<p>The question is this: how many zeros are there in the whole vector of 10 000 numbers, how many 1s, and so on right up to the largest value within counts? A formidable task for you or me, but for R it is just:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="r-basic-data-structures.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(counts)</span></code></pre></div>
<pre><code>## counts
##    1    2    3    4    5    6    7    8    9   10 
## 1017  986  989  987  974  978  997 1022 1053  997</code></pre>
<div id="tapply-function" class="section level4" number="2.7.5.1">
<h4><span class="header-section-number">2.7.5.1</span> <code>tapply</code> function</h4>
<p>One of the most important functions in all of R is tapply. It does not sound like much from the name, but you will use it time and again for calculating means, variances, sample sizes, minima and maxima. With weather data, for instance, we might want the 12 monthly mean temperatures rather than the whole-year average. We have a response variable, temperature, and a categorical explanatory variable, month:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="r-basic-data-structures.html#cb411-1" aria-hidden="true" tabindex="-1"></a>temperature <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;./Data/city_temperature.csv&quot;</span>)</span>
<span id="cb411-2"><a href="r-basic-data-structures.html#cb411-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(temperature)</span>
<span id="cb411-3"><a href="r-basic-data-structures.html#cb411-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(temperature)</span></code></pre></div>
<pre><code>## [1] &quot;Region&quot;         &quot;Country&quot;        &quot;State&quot;          &quot;City&quot;          
## [5] &quot;Month&quot;          &quot;Day&quot;            &quot;Year&quot;           &quot;AvgTemperature&quot;</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="r-basic-data-structures.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature, Month, mean)</span></code></pre></div>
<pre><code>##        1        2        3        4        5        6        7        8 
## 30.90471 33.50187 38.67561 46.13972 52.81063 59.37346 63.68533 63.12633 
##        9       10       11       12 
## 55.79678 47.70037 38.83678 30.47562</code></pre>
<p>It is easy to apply other functions in the same way: here are the monthly variances</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="r-basic-data-structures.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature,Month,var)</span></code></pre></div>
<pre><code>##         1         2         3         4         5         6         7         8 
##  694.4614  633.2653  697.8510  767.8669  973.1084 1042.9352  980.9215  948.5103 
##         9        10        11        12 
##  882.3228  812.8217  785.9120  979.5516</code></pre>
<p>and the monthly max</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="r-basic-data-structures.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature,Month,max)</span></code></pre></div>
<pre><code>##     1     2     3     4     5     6     7     8     9    10    11    12 
##  66.5  68.6  74.8  81.1  88.7 102.5 100.4 101.0  91.4  83.3  74.5  70.0</code></pre>
<p>If R does not have a built in function to do what you want, then you can easily write your own. Here, for instance, is a function to calculate the standard error of each mean (these are called anonymous functions in R, because they are unnamed):</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="r-basic-data-structures.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature, Month,  <span class="cf">function</span>(x) <span class="fu">sqrt</span>(<span class="fu">var</span>(x)<span class="sc">/</span><span class="fu">length</span>(x)))</span></code></pre></div>
<pre><code>##         1         2         3         4         5         6         7         8 
## 0.1446289 0.1446299 0.1449792 0.1545970 0.1730663 0.1835656 0.1751918 0.1723541 
##         9        10        11        12 
## 0.1689770 0.1595505 0.1594831 0.1746138</code></pre>
<p>The <code>tapply</code> function is very flexible. It can produce multi-dimensional tables simply by replacing the one categorical variable (<code>Month</code>) by a <code>list</code> of categorical variables. Here are the monthly means calculated separately for each year, as specified by <code>list(Year,Month)</code>. The variable you name first in the list (<code>Year</code>) will appear as the row of the results table and the second will appear as the columns (<code>Month</code>):</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="r-basic-data-structures.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature,<span class="fu">list</span>(Year,Month),mean)[,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##             1        2        3        4        5        6
## 200        NA       NA       NA       NA       NA       NA
## 201        NA       NA       NA       NA       NA       NA
## 1995 22.59082 31.34159 31.27190 37.80881 44.95441 50.55163
## 1996 18.08208 19.10475 25.95685 35.57652 43.73778 50.99244
## 1997 25.79462 30.60540 33.23219 39.33719 46.48344 53.38289
## 1998 27.00767 29.15087 32.80416 40.43363 48.75534 54.22356
## 1999 26.07477 30.85468 35.46308 42.24148 47.33011 54.67496
## 2000 25.05871 32.17456 35.57957 46.41452 53.99290 59.49000
## 2001 33.14029 33.28294 40.46552 43.84822 52.21448 54.50970
## 2002 30.88344 36.58143 34.60559 43.68704 54.10151 38.15141
## 2003 28.42867 26.63484 36.12358 40.95430 48.39011 56.53770
## 2004 27.87397 31.66127 37.06129 44.72202 52.05897 62.11159
## 2005 35.04232 31.47177 38.67312 48.97246 55.90238 63.44032
## 2006 29.23203 32.16905 38.62158 47.16979 53.53997 60.69301
## 2007 40.09750 38.35009 43.29540 52.09333 57.68266 65.78025
## 2008 37.41471 40.13305 42.38426 50.03049 58.44178 64.35772
## 2009 33.20831 35.33643 42.16637 47.20308 59.01427 64.22975
## 2010 25.41574 30.35200 37.11865 45.17927 51.46735 60.83972
## 2011 32.77954 33.30758 40.97986 50.51585 57.07600 62.27951
## 2012 35.67784 30.45354 45.51511 49.80105 58.81749 60.94851
## 2013 34.17175 35.80811 37.82493 49.38892 57.52337 64.08892
## 2014 37.04133 35.72973 46.33086 52.17991 57.58596 64.26360
## 2015 36.87864 36.98958 43.73880 50.28946 57.90881 64.77072
## 2016 34.73095 41.22544 38.58570 50.50559 53.44534 65.47865
## 2017 30.96312 39.02403 46.69494 48.59640 58.65650 66.35387
## 2018 34.86553 32.96776 39.32351 53.77184 61.45348 65.32789
## 2019 30.31927 40.28722 45.52725 46.30789 34.89703 66.84974
## 2020 38.31691 42.69720 44.17044 50.36505 53.66778       NA</code></pre>
<p>The subscripts [,1:6] simply restrict the output to the first six months.</p>
<p>There is just one thing about <code>tapply</code> that might confuse you. If you try to apply a function that has built-in protection against missing values, then <code>tapply</code> may not do what you want, producing <code>NA</code> instead of the numerical answer. This is most likely to happen with the mean function because its default is to produce NA when there are one or more missing values. The remedy is to provide an extra argument to <code>tapply</code>, specifying that you want to see the average of the non-missing values. Use <code>na.rm=TRUE</code> to remove the missing values like this:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="r-basic-data-structures.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature,Year,mean,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##       200       201      1995      1996      1997      1998      1999      2000 
## -99.00000 -99.00000  38.63447  36.53759  41.29181  40.93638  42.25044  46.42167 
##      2001      2002      2003      2004      2005      2006      2007      2008 
##  44.92223  43.83141  43.50428  47.62057  48.85940  48.09095  50.78713  51.06084 
##      2009      2010      2011      2012      2013      2014      2015      2016 
##  49.92104  47.09856  49.96520  49.11578  51.17017  52.33811  51.77581  50.39242 
##      2017      2018      2019      2020 
##  51.68254  50.20742  49.60530  44.80030</code></pre>
<p>You might want to trim some of the extreme values before calculating the mean (the arithmetic mean is famously sensitive to outliers). The <code>trim</code> option allows you to specify the fraction of the data (between 0 and 0.5) that you want to be omitted from the left- and right-hand tails of the sorted vector of values before computing the mean of the central values:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="r-basic-data-structures.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(AvgTemperature,Year,mean,<span class="at">trim=</span><span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>##       200       201      1995      1996      1997      1998      1999      2000 
## -99.00000 -99.00000  49.73343  48.49846  50.11555  50.42651  51.01058  52.25806 
##      2001      2002      2003      2004      2005      2006      2007      2008 
##  51.33122  51.84361  50.82469  51.57898  51.90048  52.28212  52.73041  52.23925 
##      2009      2010      2011      2012      2013      2014      2015      2016 
##  52.62449  50.94259  52.62774  51.74824  51.57276  53.23475  52.13158  52.07910 
##      2017      2018      2019      2020 
##  52.29157  53.30457  52.35184  44.95409</code></pre>
</div>
<div id="aggregate-function" class="section level4" number="2.7.5.2">
<h4><span class="header-section-number">2.7.5.2</span> <code>aggregate</code> function</h4>
<p>Suppose that we have two response variables (<code>y</code> and <code>z</code>) and two explanatory variables (<code>x</code> and <code>w</code>) that we might want to use to summarize functions like mean or variance of <code>y</code> and/or <code>z</code>. The <code>aggregate</code> function has a formula method which allows elegant summaries of four kinds:</p>
<ul>
<li>one to one: <code>aggregate(y ~ x, mean)</code></li>
<li>one to many: <code>aggregate(y ~ x + w, mean)</code></li>
<li>many to one: <code>aggregate(cbind(y,z) ~ x, mean)</code></li>
<li>many to many: <code>aggregate(cbind(y,z) ~ x + w, mean)</code></li>
</ul>
<p>Here is an example using a dataframe with many categorical and continuous variables:</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="r-basic-data-structures.html#cb427-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;./Data/bank.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb427-2"><a href="r-basic-data-structures.html#cb427-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   age         job marital         education default housing    loan   contact
## 1  30 blue-collar married          basic.9y      no     yes      no  cellular
## 2  39    services  single       high.school      no      no      no telephone
## 3  25    services married       high.school      no     yes      no telephone
## 4  38    services married          basic.9y      no unknown unknown telephone
## 5  47      admin. married university.degree      no     yes      no  cellular
## 6  32    services  single university.degree      no      no      no  cellular
##   month day_of_week duration campaign pdays previous    poutcome emp.var.rate
## 1   may         fri      487        2   999        0 nonexistent         -1.8
## 2   may         fri      346        4   999        0 nonexistent          1.1
## 3   jun         wed      227        1   999        0 nonexistent          1.4
## 4   jun         fri       17        3   999        0 nonexistent          1.4
## 5   nov         mon       58        1   999        0 nonexistent         -0.1
## 6   sep         thu      128        3   999        2     failure         -1.1
##   cons.price.idx cons.conf.idx euribor3m nr.employed  y
## 1         92.893         -46.2     1.313      5099.1 no
## 2         93.994         -36.4     4.855      5191.0 no
## 3         94.465         -41.8     4.962      5228.1 no
## 4         94.465         -41.8     4.959      5228.1 no
## 5         93.200         -42.0     4.191      5195.8 no
## 6         94.199         -37.5     0.884      4963.6 no</code></pre>
<p>Here is one-to-one use of <code>aggregate</code> to find mean the <code>cons.price.idx</code> in the different <code>marital</code> samples:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="r-basic-data-structures.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(cons.price.idx <span class="sc">~</span> marital, df, mean)</span></code></pre></div>
<pre><code>##    marital cons.price.idx
## 1 divorced       93.60055
## 2  married       93.59904
## 3   single       93.52997
## 4  unknown       93.53755</code></pre>
<p>Here is a one-to-many use to look at the interaction between <code>marital</code> and <code>contact</code>:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="r-basic-data-structures.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(cons.price.idx <span class="sc">~</span> marital <span class="sc">+</span> contact, df, mean)</span></code></pre></div>
<pre><code>##    marital   contact cons.price.idx
## 1 divorced  cellular       93.34316
## 2  married  cellular       93.32591
## 3   single  cellular       93.34077
## 4  unknown  cellular       93.27671
## 5 divorced telephone       94.04743
## 6  married telephone       94.03531
## 7   single telephone       93.99391
## 8  unknown telephone       93.99400</code></pre>
<p>Finally, here is a many-to-many use to find mean <code>euribor3m</code> as well as mean <code>cons.price.idx</code> for the interaction between <code>marital</code> and <code>contact</code>:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="r-basic-data-structures.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(<span class="fu">cbind</span>(cons.price.idx, euribor3m) <span class="sc">~</span> marital <span class="sc">+</span> contact, df, mean)</span></code></pre></div>
<pre><code>##    marital   contact cons.price.idx euribor3m
## 1 divorced  cellular       93.34316  3.155212
## 2  married  cellular       93.32591  3.206862
## 3   single  cellular       93.34077  2.936846
## 4  unknown  cellular       93.27671  3.282143
## 5 divorced telephone       94.04743  4.665497
## 6  married telephone       94.03531  4.561857
## 7   single telephone       93.99391  4.372266
## 8  unknown telephone       93.99400  4.858000</code></pre>
</div>
<div id="parallel-minima-and-maxima" class="section level4" number="2.7.5.3">
<h4><span class="header-section-number">2.7.5.3</span> Parallel minima and maxima</h4>
<p>Here are three vectors of the same length, <code>x</code>, <code>y</code> and <code>z</code>. The parallel minimum function, <code>pmin</code>, finds the minimum from any one of the three variables for each subscript, and produces a vector as its result (of length equal to the longest of <code>x</code>, <code>y</code>, or <code>z</code>):</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="r-basic-data-structures.html#cb435-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">6</span>)</span>
<span id="cb435-2"><a href="r-basic-data-structures.html#cb435-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 0.8711427 0.4030111 0.5606412 0.2872073 0.2260351 0.1647041</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="r-basic-data-structures.html#cb437-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">6</span>)</span>
<span id="cb437-2"><a href="r-basic-data-structures.html#cb437-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 0.9675614 0.2442290 0.9152520 0.2996409 0.5876295 0.9767194</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="r-basic-data-structures.html#cb439-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">6</span>)</span>
<span id="cb439-2"><a href="r-basic-data-structures.html#cb439-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] 0.6375336 0.9140610 0.3177856 0.4496507 0.6497485 0.2029685</code></pre>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="r-basic-data-structures.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pmin</span>(x,y,z)</span></code></pre></div>
<pre><code>## [1] 0.6375336 0.2442290 0.3177856 0.2872073 0.2260351 0.1647041</code></pre>
</div>
<div id="summary-by-groups-with-tapply" class="section level4" number="2.7.5.4">
<h4><span class="header-section-number">2.7.5.4</span> Summary by groups with <code>tapply</code></h4>
<p>The vector function <code>tapply</code> is one of the most important and useful vector functions to master. The ‘t’ stands for ‘table’ and the idea is to apply a function to produce a table from the values in the vector, based on one or more grouping variables (often the grouping is by factor levels). This sounds much more complicated than it really is:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="r-basic-data-structures.html#cb443-1" aria-hidden="true" tabindex="-1"></a>daphnia <span class="ot">=</span> <span class="fu">read.table</span>(<span class="st">&quot;./Data/daphnia.txt&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb443-2"><a href="r-basic-data-structures.html#cb443-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(daphnia)</span>
<span id="cb443-3"><a href="r-basic-data-structures.html#cb443-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(daphnia)</span></code></pre></div>
<pre><code>## [1] &quot;Growth.rate&quot; &quot;Water&quot;       &quot;Detergent&quot;   &quot;Daphnia&quot;</code></pre>
<p>The response variable is <code>Growth.rate</code> and the other three variables are factors. Suppose we want the mean growth rate for each detergent:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="r-basic-data-structures.html#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(Growth.rate, Detergent, mean)</span></code></pre></div>
<pre><code>##   BrandA   BrandB   BrandC   BrandD 
## 3.884832 4.010044 3.954512 3.558231</code></pre>
<p>This produces a table with four entries, one for each level of the factor called <code>Detergent</code>.</p>
<p>To produce a two-dimensional table we put the two grouping variables in a list. Here we calculate the median growth rate for water type and daphnia clone:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="r-basic-data-structures.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(Growth.rate,<span class="fu">list</span>(Water,Daphnia),median)</span></code></pre></div>
<pre><code>##        Clone1   Clone2   Clone3
## Tyne 2.874053 3.908644 4.618288
## Wear 2.590373 5.532726 4.302642</code></pre>
<p>The first variable in the list creates the rows of the table and the second the columns.</p>
</div>
<div id="addresses-within-vectors" class="section level4" number="2.7.5.5">
<h4><span class="header-section-number">2.7.5.5</span> Addresses within vectors</h4>
<p>There is an important function called <code>which</code> for finding addresses within vectors. The vector y looks like this:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="r-basic-data-structures.html#cb449-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">4</span>,<span class="dv">11</span>)</span></code></pre></div>
<p>Suppose we wanted to know which elements of <code>y</code> contained values bigger than 5. We type:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="r-basic-data-structures.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(y<span class="sc">&gt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1]  1  4  5  6  7  8 11 13 15</code></pre>
<p>Notice that the answer to this enquiry is a set of subscripts. We do not use subscripts inside the <code>which</code> function itself. The function is applied to the whole array. To see the values of y that are larger than 5, we just type:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="r-basic-data-structures.html#cb452-1" aria-hidden="true" tabindex="-1"></a>y[y<span class="sc">&gt;</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1]  8  7  6  6  8  9  9 10 11</code></pre>
</div>
<div id="finding-closest-values" class="section level4" number="2.7.5.6">
<h4><span class="header-section-number">2.7.5.6</span> Finding closest values</h4>
<p>Finding the value in a vector that is closest to a specified value is straightforward using which. The vector <code>x</code> contains 1000 random numbers from a normal distribution with mean = 100 and standard deviation = 10:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="r-basic-data-structures.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb454-2"><a href="r-basic-data-structures.html#cb454-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">100</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>Here, we want to find the value of <code>x</code> that is closest to 108.0. The logic is to work out the difference between 108 and each of the 1000 random numbers, then find which of these differences is the smallest. This is what the R code looks like:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="r-basic-data-structures.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">abs</span>(x<span class="dv">-108</span>) <span class="sc">==</span> <span class="fu">min</span>(<span class="fu">abs</span>(x<span class="dv">-108</span>)))</span></code></pre></div>
<pre><code>## [1] 626</code></pre>
<p>The closest value to 108.0 is in location 626 within <code>x</code>. But just how close to 108.0 is this 626 value? We use 626 as a subscript on <code>x</code> to find this out:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="r-basic-data-structures.html#cb457-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">626</span>]</span></code></pre></div>
<pre><code>## [1] 108.0139</code></pre>
</div>
<div id="sorting-ranking-and-ordering" class="section level4" number="2.7.5.7">
<h4><span class="header-section-number">2.7.5.7</span> Sorting, Ranking and Ordering</h4>
<p>These three related concepts are important, and one of them (order) is difficult to understand at the beginning. Let us take a simple example:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="r-basic-data-structures.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb459-2"><a href="r-basic-data-structures.html#cb459-2" aria-hidden="true" tabindex="-1"></a>houses_prices <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>, <span class="dv">150</span>, <span class="dv">500</span>)</span>
<span id="cb459-3"><a href="r-basic-data-structures.html#cb459-3" aria-hidden="true" tabindex="-1"></a>houses_prices</span></code></pre></div>
<pre><code>##  [1] 376.4160 287.9790 366.4756 316.9119 197.6340 173.5845 195.2034 287.5913
##  [9] 150.9039 367.0721</code></pre>
<p>We apply the three different functions to the vector called <code>houses_price</code>:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="r-basic-data-structures.html#cb461-1" aria-hidden="true" tabindex="-1"></a>ranks <span class="ot">=</span> <span class="fu">rank</span>(houses_prices)</span>
<span id="cb461-2"><a href="r-basic-data-structures.html#cb461-2" aria-hidden="true" tabindex="-1"></a>ranks</span></code></pre></div>
<pre><code>##  [1] 10  6  8  7  4  2  3  5  1  9</code></pre>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="r-basic-data-structures.html#cb463-1" aria-hidden="true" tabindex="-1"></a>sorted <span class="ot">=</span> <span class="fu">sort</span>(houses_prices)</span>
<span id="cb463-2"><a href="r-basic-data-structures.html#cb463-2" aria-hidden="true" tabindex="-1"></a>sorted</span></code></pre></div>
<pre><code>##  [1] 150.9039 173.5845 195.2034 197.6340 287.5913 287.9790 316.9119 366.4756
##  [9] 367.0721 376.4160</code></pre>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="r-basic-data-structures.html#cb465-1" aria-hidden="true" tabindex="-1"></a>ordered <span class="ot">=</span> <span class="fu">order</span>(houses_prices)</span>
<span id="cb465-2"><a href="r-basic-data-structures.html#cb465-2" aria-hidden="true" tabindex="-1"></a>ordered</span></code></pre></div>
<pre><code>##  [1]  9  6  7  5  8  2  4  3 10  1</code></pre>
<p>Let’s create a data frame to observe the data easily:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="r-basic-data-structures.html#cb467-1" aria-hidden="true" tabindex="-1"></a>view <span class="ot">=</span> <span class="fu">data.frame</span>(houses_prices, ranks, sorted, ordered)</span>
<span id="cb467-2"><a href="r-basic-data-structures.html#cb467-2" aria-hidden="true" tabindex="-1"></a>view</span></code></pre></div>
<pre><code>##    houses_prices ranks   sorted ordered
## 1       376.4160    10 150.9039       9
## 2       287.9790     6 173.5845       6
## 3       366.4756     8 195.2034       7
## 4       316.9119     7 197.6340       5
## 5       197.6340     4 287.5913       8
## 6       173.5845     2 287.9790       2
## 7       195.2034     3 316.9119       4
## 8       287.5913     5 366.4756       3
## 9       150.9039     1 367.0721      10
## 10      367.0721     9 376.4160       1</code></pre>
<p><strong>RANK</strong>: The prices themselves are in no particular sequence. The <code>ranks</code> column contains the value that is the rank of the particular data point (value of <code>Price</code>), where 1 is assigned to the lowest data point and <code>length(Price)</code> – here 10 – is assigned to the highest data point.</p>
<p><strong>SORT</strong>: The sorted vector is very straightforward. It contains the values of <code>Price</code> sorted into ascending order. If you want to sort into descending order, use the reverse order function <code>rev</code> like this:</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="r-basic-data-structures.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rev</span>(<span class="fu">sort</span>(houses_prices))</span></code></pre></div>
<pre><code>##  [1] 376.4160 367.0721 366.4756 316.9119 287.9790 287.5913 197.6340 195.2034
##  [9] 173.5845 150.9039</code></pre>
<p><strong>ORDER</strong>: This is the most important of the three functions, and the hardest to understand. The numbers in this column are subscripts between 1 and 10. The order function returns an integer vector containing the permutation that will sort the input into ascending order.</p>
<p>Using <code>order</code> with subscripts is a much safer option than using <code>sort</code>, because with <code>sort</code> the values of the response variable and the explanatory variables could be uncoupled with potentially disastrous results if this is not realized at the time that modelling was carried out.</p>
<p>Imagine we have another variable that is the location of the house represented by a letter:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="r-basic-data-structures.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb471-2"><a href="r-basic-data-structures.html#cb471-2" aria-hidden="true" tabindex="-1"></a>location <span class="ot">=</span> <span class="fu">sample</span>(LETTERS, <span class="dv">10</span>)</span>
<span id="cb471-3"><a href="r-basic-data-structures.html#cb471-3" aria-hidden="true" tabindex="-1"></a>location</span></code></pre></div>
<pre><code>##  [1] &quot;L&quot; &quot;W&quot; &quot;V&quot; &quot;A&quot; &quot;Q&quot; &quot;D&quot; &quot;J&quot; &quot;F&quot; &quot;X&quot; &quot;M&quot;</code></pre>
<p>We can use the <code>order</code> function to organize the location of the houses like this:</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="r-basic-data-structures.html#cb473-1" aria-hidden="true" tabindex="-1"></a>location[<span class="fu">order</span>(houses_prices)]</span></code></pre></div>
<pre><code>##  [1] &quot;X&quot; &quot;D&quot; &quot;J&quot; &quot;Q&quot; &quot;F&quot; &quot;W&quot; &quot;A&quot; &quot;V&quot; &quot;M&quot; &quot;L&quot;</code></pre>
</div>
<div id="unique-and-duplicated-functions" class="section level4" number="2.7.5.8">
<h4><span class="header-section-number">2.7.5.8</span> <code>unique</code> and <code>duplicated</code> functions</h4>
<p>The difference is best seen with a simple example. Here is a vector of names:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="r-basic-data-structures.html#cb475-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Williams&quot;</span>,<span class="st">&quot;Jones&quot;</span>,<span class="st">&quot;Smith&quot;</span>,<span class="st">&quot;Williams&quot;</span>,<span class="st">&quot;Jones&quot;</span>,<span class="st">&quot;Williams&quot;</span>)</span></code></pre></div>
<p>We can see how many times each name appears using table:We can see how many times each name appears using <code>table</code>:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="r-basic-data-structures.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(names)</span></code></pre></div>
<pre><code>## names
##    Jones    Smith Williams 
##        2        1        3</code></pre>
<p>It is clear that the vector contains just three different names. The function called <code>unique</code> extracts these three unique names, creating a vector of length 3, unsorted, in the order in which the names are encountered in the vector:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="r-basic-data-structures.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(names)</span></code></pre></div>
<pre><code>## [1] &quot;Williams&quot; &quot;Jones&quot;    &quot;Smith&quot;</code></pre>
<p>In contrast, the function called <code>duplicated</code> produces a vector, of the same length as the vector of names, containing the logical values either <code>FALSE</code> or <code>TRUE</code>, depending upon whether or not that name has appeared already (reading from the left). You need to see this in action to understand what is happening, and why it might be useful:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="r-basic-data-structures.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">duplicated</span>(names)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<p>The first three names are not duplicated (<code>FALSE</code>), but the last three are all duplicated (<code>TRUE</code>). We can mimic the <code>unique</code> function by using this vector as subscripts like this:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="r-basic-data-structures.html#cb482-1" aria-hidden="true" tabindex="-1"></a>names[<span class="sc">!</span><span class="fu">duplicated</span>(names)]</span></code></pre></div>
<pre><code>## [1] &quot;Williams&quot; &quot;Jones&quot;    &quot;Smith&quot;</code></pre>
<p>There you have it: if you want a shortened vector, containing only the unique values in names, then use <code>unique</code>, but if you want a vector of the same length as names then use <code>duplicated</code>.</p>
</div>
</div>
<div id="sets" class="section level3" number="2.7.6">
<h3><span class="header-section-number">2.7.6</span> Sets</h3>
<p>There are three essential functions for manipulating sets. The principles are easy to see if we work with an example of two sets:</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="r-basic-data-structures.html#cb484-1" aria-hidden="true" tabindex="-1"></a>setA <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb484-2"><a href="r-basic-data-structures.html#cb484-2" aria-hidden="true" tabindex="-1"></a>setB <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;g&quot;</span>)</span></code></pre></div>
<p>The <strong>union</strong> of two sets is everything in the two sets taken together, but counting elements only once that are common to both sets:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="r-basic-data-structures.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(setA, setB)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot;</code></pre>
<p>The <strong>intersection</strong> of two sets is the material that they have in common:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="r-basic-data-structures.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(setA, setB)</span></code></pre></div>
<pre><code>## [1] &quot;d&quot; &quot;e&quot;</code></pre>
<p>Note, however, that the <strong>difference</strong> between two sets is order-dependent. It is the material that is in the first named set, that is not in the second named set. Thus <code>setdiff(A,B)</code> gives a different answer than <code>setdiff(B,A)</code>. For our example:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="r-basic-data-structures.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(setA, setB)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="r-basic-data-structures.html#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(setB, setA)</span></code></pre></div>
<pre><code>## [1] &quot;f&quot; &quot;g&quot;</code></pre>
<p>There is also a built-in function <code>setequal</code> for testing if two sets are equal:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="r-basic-data-structures.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setequal</span>(setA, setB)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>You can use <code>%in%</code> for comparing sets. The result is a logical vector whose length matches the vector on the left:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="r-basic-data-structures.html#cb495-1" aria-hidden="true" tabindex="-1"></a>setA <span class="sc">%in%</span> setB</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="r-basic-data-structures.html#cb497-1" aria-hidden="true" tabindex="-1"></a>setB <span class="sc">%in%</span> setA</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<div id="factors" class="section level3" number="2.7.7">
<h3><span class="header-section-number">2.7.7</span> Factors</h3>
<p>Conceptually, factors are variables in R which take on a limited number of different values; such variables are often refered to as categorical variables. One of the most important uses of factors is in statistical modeling; since categorical variables enter into statistical models differently than continuous variables, storing data as factors ensures that the modeling functions will treat such data correctly.</p>
<p>Factors in R are stored as a vector of integer values with a corresponding set of character values to use when the factor is displayed. The <code>factor</code> function is used to create a factor. The only required argument to <code>factor</code> is a vector of values which will be returned as a vector of factor values. Both numeric and character variables can be made into factors, but the factor levels will always be character values. You can see the possible levels for a factor through the <code>levels</code> command.</p>
<p>To change the order in which the levels will be displayed from their default sorted order, the <code>levels=</code> argument can be given a vector of all the possible values of the variable in the order you desire. If the ordering should also be used when performing comparisons, use the optional <code>ordered=TRUE</code> argument. In this case, the factor is known as an ordered factor.</p>
<p><em>Reminder:</em></p>
<ul>
<li><p><strong>Categorical variable</strong>: one that can take a limited number of possible values (categories). Examples of categorical variables: gender of a person, nationality…</p>
<ul>
<li>Categorical nominal variable: one that does not have a pre-established order.</li>
<li>Categorical ordinal variable: that which has an established order.</li>
</ul></li>
<li><p><strong>Continuous variable</strong>: one that can take an infinite number of possible values. Examples of continuous variables: weight of a person, height of a person…</p></li>
</ul>
<p>The different values that the variable can take are called levels, <strong>factor levels</strong>.</p>
<p>Why use factors?</p>
<ul>
<li>They allow to establish a different order than the alphabetical one.</li>
<li>Many R models/packages use them</li>
</ul>
<p>Factors are categorical variables that have a fixed number of levels. A simple example of a factor might be a variable called gender with two levels: ‘female’ and ‘male.’ If you had three females and two males, you could create the factor like this:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="r-basic-data-structures.html#cb499-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>))</span>
<span id="cb499-2"><a href="r-basic-data-structures.html#cb499-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(gender)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="r-basic-data-structures.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(gender)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>More often, you will create a dataframe by reading your data from a file using read.table. When we did this in the previous version of R (R3), the strings in our data table were automatically converted into factors. This was useful as long as our data table was well structured and clean, but it could cause problems in some cases. Let’s see an example of a well-structured data table:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="r-basic-data-structures.html#cb503-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;./Data/GenderPurchase.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb503-2"><a href="r-basic-data-structures.html#cb503-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(data<span class="sc">$</span>Gender)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>As we can see, in this version of R (R4), the strings are coded as default character type. We can solve this by adding a parameter to our command as seen below:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="r-basic-data-structures.html#cb505-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;./Data/GenderPurchase.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb505-2"><a href="r-basic-data-structures.html#cb505-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(data<span class="sc">$</span>Gender)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Let’s see what happens with a data table that is not well structured in case of reading the strings as factors:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="r-basic-data-structures.html#cb507-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;./Data/titanic3.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb507-2"><a href="r-basic-data-structures.html#cb507-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1309 obs. of  14 variables:
##  $ pclass   : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ survived : int  1 1 0 0 0 1 1 0 1 0 ...
##  $ name     : Factor w/ 1307 levels &quot;Abbing, Mr. Anthony&quot;,..: 22 24 25 26 27 31 46 47 51 55 ...
##  $ sex      : Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 1 2 1 2 1 2 1 2 1 2 ...
##  $ age      : num  29 0.917 2 30 25 ...
##  $ sibsp    : int  0 1 1 1 1 0 1 0 2 0 ...
##  $ parch    : int  0 2 2 2 2 0 0 0 0 0 ...
##  $ ticket   : Factor w/ 929 levels &quot;110152&quot;,&quot;110413&quot;,..: 188 50 50 50 50 125 93 16 77 826 ...
##  $ fare     : num  211 152 152 152 152 ...
##  $ cabin    : Factor w/ 187 levels &quot;&quot;,&quot;A10&quot;,&quot;A11&quot;,..: 45 81 81 81 81 151 147 17 63 1 ...
##  $ embarked : Factor w/ 4 levels &quot;&quot;,&quot;C&quot;,&quot;Q&quot;,&quot;S&quot;: 4 4 4 4 4 4 4 4 4 2 ...
##  $ boat     : Factor w/ 28 levels &quot;&quot;,&quot;1&quot;,&quot;10&quot;,&quot;11&quot;,..: 13 4 1 1 1 14 3 1 28 1 ...
##  $ body     : int  NA NA NA 135 NA NA NA NA NA 22 ...
##  $ home.dest: Factor w/ 370 levels &quot;&quot;,&quot;?Havana, Cuba&quot;,..: 310 232 232 232 232 238 163 25 23 230 ...</code></pre>
<p>We can find ourselves with variables that are completely useless and very difficult to manage, with as many levels of the factors as cases we have in the data table.</p>
<p>In these cases it is much more comfortable to read the strings as characters and work on those variables to extract useful information from them as we will see later.</p>
<p>We will use the daphnia dataset to perform some examples with factors:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="r-basic-data-structures.html#cb509-1" aria-hidden="true" tabindex="-1"></a>daphnia <span class="ot">=</span> <span class="fu">read.table</span>(<span class="st">&quot;./Data/daphnia.txt&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb509-2"><a href="r-basic-data-structures.html#cb509-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(daphnia)</span></code></pre></div>
<pre><code>## The following objects are masked from daphnia (pos = 3):
## 
##     Daphnia, Detergent, Growth.rate, Water</code></pre>
<p>There are some important functions for dealing with factors. You will often want to check that a variable is a factor (especially if the factor levels are numbers rather than characters):</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="r-basic-data-structures.html#cb511-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(Water)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>To discover the names of the factor levels, we use the levels function:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="r-basic-data-structures.html#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(Detergent)</span></code></pre></div>
<pre><code>## [1] &quot;BrandA&quot; &quot;BrandB&quot; &quot;BrandC&quot; &quot;BrandD&quot;</code></pre>
<p>To discover the number of levels of a factor, we use the nlevels function:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="r-basic-data-structures.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(Detergent)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>The same result is achieved by applying the length function to the levels of a factor:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="r-basic-data-structures.html#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">levels</span>(Detergent))</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>By default, factor levels are treated in alphabetical order. If you want to change this (as you might, for instance, in ordering the bars of a bar chart) then this is straightforward: just type the factor levels in the order that you want them to be used, and provide this vector as the second argument to the factor function.</p>
<p>Suppose we have an experiment with three factor levels in a variable called treatment, and we want them to appear in this order: ‘nothing,’ ‘single’ dose and ‘double’ dose. We shall need to override R’s natural tendency to order them ‘double,’ ‘nothing,’ ‘single’:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="r-basic-data-structures.html#cb519-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb519-2"><a href="r-basic-data-structures.html#cb519-2" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">=</span> <span class="fu">as.factor</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;double&quot;</span>, <span class="st">&quot;nothing&quot;</span>, <span class="st">&quot;single&quot;</span>), <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb519-3"><a href="r-basic-data-structures.html#cb519-3" aria-hidden="true" tabindex="-1"></a>response <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb519-4"><a href="r-basic-data-structures.html#cb519-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(response, treatment, mean)</span></code></pre></div>
<pre><code>##    double   nothing    single 
## 0.4166667 0.4871795 0.4000000</code></pre>
<p>This is achieved using the factor function like this:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="r-basic-data-structures.html#cb521-1" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">=</span> <span class="fu">factor</span>(treatment,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;nothing&quot;</span>,<span class="st">&quot;single&quot;</span>,<span class="st">&quot;double&quot;</span>))</span></code></pre></div>
<p>Now we get the order we want:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="r-basic-data-structures.html#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(response,treatment,mean)</span></code></pre></div>
<pre><code>##   nothing    single    double 
## 0.4871795 0.4000000 0.4166667</code></pre>
<p>Only == and != can be used for factors. Note, also, that a factor can only be compared to another factor with
an identical set of levels (not necessarily in the same ordering) or to a character vector. For example, you
cannot ask quantitative questions about factor levels, like &gt; or &lt;=, even if these levels are numeric.</p>
<p>To turn factor levels into numbers (integers) use the unclass function like this:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="r-basic-data-structures.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(<span class="fu">unclass</span>(treatment))</span></code></pre></div>
<pre><code>##   [1] 2 1 3 3 1 1 3 3 1 1 1 3 1 2 1 3 1 1 1 2 1 2 1 3 2 1 1 1 2 1 2 2 3 3 3 1 2
##  [38] 3 3 1 2 3 3 3 2 3 3 2 1 1 1 3 2 1 3 1 2 3 3 1 3 1 2 1 2 1 1 3 2 1 2 3 1 2
##  [75] 1 1 1 3 3 3 2 1 1 3 3 1 3 3 1 3 2 3 2 3 3 2 2 2 1 3</code></pre>
</div>
<div id="matrices-and-arrays" class="section level3" number="2.7.8">
<h3><span class="header-section-number">2.7.8</span> Matrices and Arrays</h3>
<p>An array is a multi-dimensional object. The dimensions of an array are specified by its <code>dim</code> attribute, which gives the maximal indices in each dimension. So for a three-dimensional array consisting of 24 numbers in a sequence 1:24, with dimensions 2 × 4 × 3, we write:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="r-basic-data-structures.html#cb526-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb526-2"><a href="r-basic-data-structures.html#cb526-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y) <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>)</span>
<span id="cb526-3"><a href="r-basic-data-structures.html#cb526-3" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9   11   13   15
## [2,]   10   12   14   16
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4]
## [1,]   17   19   21   23
## [2,]   18   20   22   24</code></pre>
<p>This produces three two-dimensional tables, because the third dimension is 3. This is what happens when you change the dimensions:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="r-basic-data-structures.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y) <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb528-2"><a href="r-basic-data-structures.html#cb528-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    7   10
## [2,]    8   11
## [3,]    9   12
## 
## , , 3
## 
##      [,1] [,2]
## [1,]   13   16
## [2,]   14   17
## [3,]   15   18
## 
## , , 4
## 
##      [,1] [,2]
## [1,]   19   22
## [2,]   20   23
## [3,]   21   24</code></pre>
<p>Now we have four two-dimensional tables, each of three rows and two columns.</p>
<p>A matrix is a two-dimensional array containing numbers. A dataframe is a two-dimensional list containing (potentially a mix of) numbers, text or logical variables in different columns.</p>
<p>When there are two subscripts [5,3] to an object like a matrix or a dataframe, the first subscript refers to the row number (5 in this example; the rows are defined as margin number 1) and the second subscript refers to the column number (3 in this example; the columns are margin number 2).</p>
<p>There is an important and powerful convention in R, such that when a subscript appears as a blank it is understood to mean ‘all of.’ Thus:</p>
<ul>
<li>[,4] means all rows in column 4 of an object;</li>
<li>[2,] means all columns in row 2 of an object.</li>
</ul>
</div>
<div id="matrices" class="section level3" number="2.7.9">
<h3><span class="header-section-number">2.7.9</span> Matrices</h3>
<p>There are several ways of making a matrix. You can create one directly like this:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="r-basic-data-structures.html#cb530-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">nrow=</span><span class="dv">3</span>)</span>
<span id="cb530-2"><a href="r-basic-data-structures.html#cb530-2" aria-hidden="true" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    0    1    0
## [3,]    0    0    1</code></pre>
<p>where, by default, the numbers are entered column-wise.</p>
<p>The class and attributes of <code>X</code> indicate that it is a matrix of three rows and three columns (these are its <code>dim</code> attributes):</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="r-basic-data-structures.html#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(X)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="r-basic-data-structures.html#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(X)</span></code></pre></div>
<pre><code>## $dim
## [1] 3 3</code></pre>
<p>In the next example, the data in the vector appear row-wise, so we indicate this with <code>byrow=T</code>:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="r-basic-data-structures.html#cb536-1" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb536-2"><a href="r-basic-data-structures.html#cb536-2" aria-hidden="true" tabindex="-1"></a>V <span class="ot">=</span> <span class="fu">matrix</span>(vector,<span class="at">byrow=</span>T,<span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb536-3"><a href="r-basic-data-structures.html#cb536-3" aria-hidden="true" tabindex="-1"></a>V</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3    4    2
## [2,]    2    4    3    1</code></pre>
<p>Another way to convert a vector into a matrix is by providing the vector object with two dimensions (rows and columns) using the dim function like this:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="r-basic-data-structures.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(vector) <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>)</span>
<span id="cb538-2"><a href="r-basic-data-structures.html#cb538-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(vector)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We need to be careful, however, because we have made no allowance at this stage for the fact that the data were entered row-wise into vector:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="r-basic-data-structures.html#cb540-1" aria-hidden="true" tabindex="-1"></a>vector</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    3
## [3,]    3    2
## [4,]    4    1</code></pre>
<p>The matrix we want is the transpose, <code>t</code>, of this matrix:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="r-basic-data-structures.html#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(vector)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    4    3    2    1</code></pre>
<div id="naming-the-rows-and-columns-of-matrices" class="section level4" number="2.7.9.1">
<h4><span class="header-section-number">2.7.9.1</span> Naming the rows and columns of matrices</h4>
<p>At first, matrices have numbers naming their rows and columns (see above). Here is a 4 × 5 matrix of random integers from a Poisson distribution with mean 1.5:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="r-basic-data-structures.html#cb544-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">rpois</span>(<span class="dv">20</span>,<span class="fl">1.5</span>),<span class="at">nrow=</span><span class="dv">4</span>)</span>
<span id="cb544-2"><a href="r-basic-data-structures.html#cb544-2" aria-hidden="true" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    0    2    4    0    1
## [2,]    1    6    2    2    2
## [3,]    0    2    3    1    1
## [4,]    1    2    1    1    1</code></pre>
<p>Suppose that the rows refer to four different trials and we want to label the rows ‘Trial.1’ etc. We employ the function <code>rownames</code> to do this. We could use the <code>paste</code> function but here we take advantage of the <code>prefix</code> option:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="r-basic-data-structures.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(X) <span class="ot">=</span> <span class="fu">rownames</span>(X,<span class="at">do.NULL=</span><span class="cn">FALSE</span>,<span class="at">prefix=</span><span class="st">&quot;Trial.&quot;</span>)</span>
<span id="cb546-2"><a href="r-basic-data-structures.html#cb546-2" aria-hidden="true" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>##         [,1] [,2] [,3] [,4] [,5]
## Trial.1    0    2    4    0    1
## Trial.2    1    6    2    2    2
## Trial.3    0    2    3    1    1
## Trial.4    1    2    1    1    1</code></pre>
<p>For the columns we want to supply a vector of different names for the five drugs involved in the trial, and use this to specify the <code>colnames(X)</code>:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="r-basic-data-structures.html#cb548-1" aria-hidden="true" tabindex="-1"></a>drug.names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;aspirin&quot;</span>, <span class="st">&quot;paracetamol&quot;</span>, <span class="st">&quot;nurofen&quot;</span>, <span class="st">&quot;hedex&quot;</span>, <span class="st">&quot;placebo&quot;</span>)</span>
<span id="cb548-2"><a href="r-basic-data-structures.html#cb548-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X) <span class="ot">=</span> drug.names</span>
<span id="cb548-3"><a href="r-basic-data-structures.html#cb548-3" aria-hidden="true" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>##         aspirin paracetamol nurofen hedex placebo
## Trial.1       0           2       4     0       1
## Trial.2       1           6       2     2       2
## Trial.3       0           2       3     1       1
## Trial.4       1           2       1     1       1</code></pre>
</div>
<div id="matrices-functions" class="section level4" number="2.7.9.2">
<h4><span class="header-section-number">2.7.9.2</span> Matrices Functions</h4>
<p>Using R, we can operate with matrices easily, since by default this type of data structures are designed for matrix algebra.</p>
<p>Let’s create a matrix to see some examples:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="r-basic-data-structures.html#cb550-1" aria-hidden="true" tabindex="-1"></a>M1 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">byrow =</span> T, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb550-2"><a href="r-basic-data-structures.html#cb550-2" aria-hidden="true" tabindex="-1"></a>M1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<p>We can know the size of the matrix using the <code>dim</code> function:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="r-basic-data-structures.html#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(M1)</span></code></pre></div>
<pre><code>## [1] 3 3</code></pre>
<p>We can also create diagonal matrices using the <code>diag</code> function:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="r-basic-data-structures.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    1    0    0    0
## [3,]    0    0    1    0    0
## [4,]    0    0    0    1    0
## [5,]    0    0    0    0    1</code></pre>
<p>Or even create a diagonal matrix using a defined vector:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="r-basic-data-structures.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    0    2    0
## [3,]    0    0    3</code></pre>
<p>We can calculate a matrix transpose:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="r-basic-data-structures.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(M1)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<p>And the trace of a matrix easily:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="r-basic-data-structures.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(M1))</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>To calculate the determinant we just need to use the <code>det</code> function:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="r-basic-data-structures.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(M1)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>In case the determinant is not 0 we can calculate the inverse of that matrix using the <code>solve</code> function. Let’s see what happens in this case:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="r-basic-data-structures.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solve(M1)</span></span></code></pre></div>
<pre><code>Error in solve.default(M1) : system is computationally singular: reciprocal condition number = 2.59052e-18</code></pre>
<p>We can create a random matrix to check this function:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="r-basic-data-structures.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb566-2"><a href="r-basic-data-structures.html#cb566-2" aria-hidden="true" tabindex="-1"></a>M2 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">9</span>), <span class="at">byrow =</span> T, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb566-3"><a href="r-basic-data-structures.html#cb566-3" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(M2)</span></code></pre></div>
<pre><code>## [1] -345436</code></pre>
<p>And now apply the <code>solve</code> function:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="r-basic-data-structures.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(M2)</span></code></pre></div>
<pre><code>##               [,1]         [,2]         [,3]
## [1,] -0.0111048067  0.016060862 -0.003925474
## [2,]  0.0149550134 -0.003381234 -0.005662409
## [3,] -0.0001418497 -0.004226543  0.016894591</code></pre>
<p>Finally, we can perform a matrix decomposition using the <code>eigen</code> function in R, obtaining the eigenvectors and the eigenvalues of that decomposition,</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="r-basic-data-structures.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eigen</span>(M1)</span></code></pre></div>
<pre><code>## eigen() decomposition
## $values
## [1]  1.611684e+01 -1.116844e+00 -5.700691e-16
## 
## $vectors
##            [,1]       [,2]       [,3]
## [1,] -0.4645473 -0.8829060  0.4082483
## [2,] -0.5707955 -0.2395204 -0.8164966
## [3,] -0.6770438  0.4038651  0.4082483</code></pre>
<p>or even a Singular Value Decomposition using the <code>svd</code> function:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="r-basic-data-structures.html#cb572-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">svd</span>(M1)</span>
<span id="cb572-2"><a href="r-basic-data-structures.html#cb572-2" aria-hidden="true" tabindex="-1"></a>s</span></code></pre></div>
<pre><code>## $d
## [1] 1.684810e+01 1.068370e+00 5.543107e-16
## 
## $u
##            [,1]        [,2]       [,3]
## [1,] -0.4796712  0.77669099  0.4082483
## [2,] -0.5723678  0.07568647 -0.8164966
## [3,] -0.6650644 -0.62531805  0.4082483
## 
## $v
##            [,1]       [,2]       [,3]
## [1,] -0.2148372 -0.8872307  0.4082483
## [2,] -0.5205874 -0.2496440 -0.8164966
## [3,] -0.8263375  0.3879428  0.4082483</code></pre>
<p>We can check that R makes a successful decomposition:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="r-basic-data-structures.html#cb574-1" aria-hidden="true" tabindex="-1"></a>s<span class="sc">$</span>u <span class="sc">%*%</span> <span class="fu">diag</span>(s<span class="sc">$</span>d) <span class="sc">%*%</span> <span class="fu">t</span>(s<span class="sc">$</span>v)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
</div>
<div id="matrices-operations" class="section level4" number="2.7.9.3">
<h4><span class="header-section-number">2.7.9.3</span> Matrices Operations</h4>
<p>We can perform arithmetic operations with matrices (additions, subtractions, multiplications…) in a similar way as we have done with vectors.</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="r-basic-data-structures.html#cb576-1" aria-hidden="true" tabindex="-1"></a>M1 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb576-2"><a href="r-basic-data-structures.html#cb576-2" aria-hidden="true" tabindex="-1"></a>M2 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">11</span><span class="sc">:</span><span class="dv">19</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb576-3"><a href="r-basic-data-structures.html#cb576-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb576-4"><a href="r-basic-data-structures.html#cb576-4" aria-hidden="true" tabindex="-1"></a>M3 <span class="ot">=</span> M1 <span class="sc">+</span> M2</span>
<span id="cb576-5"><a href="r-basic-data-structures.html#cb576-5" aria-hidden="true" tabindex="-1"></a>M3</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   12   14   16
## [2,]   18   20   22
## [3,]   24   26   28</code></pre>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="r-basic-data-structures.html#cb578-1" aria-hidden="true" tabindex="-1"></a>M1 <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    5
## [2,]    6    7    8
## [3,]    9   10   11</code></pre>
<p>In the case of matrices multiplication we must remember that two matrices can be multiplied only when the number of columns in the first equals the number of rows in the second</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="r-basic-data-structures.html#cb580-1" aria-hidden="true" tabindex="-1"></a>M1 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb580-2"><a href="r-basic-data-structures.html#cb580-2" aria-hidden="true" tabindex="-1"></a>M1</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="r-basic-data-structures.html#cb582-1" aria-hidden="true" tabindex="-1"></a>M2 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb582-2"><a href="r-basic-data-structures.html#cb582-2" aria-hidden="true" tabindex="-1"></a>M2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10   11   12
## [2,]   13   14   15</code></pre>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="r-basic-data-structures.html#cb584-1" aria-hidden="true" tabindex="-1"></a>M3 <span class="ot">=</span> M1 <span class="sc">%*%</span> M2</span>
<span id="cb584-2"><a href="r-basic-data-structures.html#cb584-2" aria-hidden="true" tabindex="-1"></a>M3</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   36   39   42
## [2,]   82   89   96
## [3,]  128  139  150</code></pre>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="r-basic-data-structures.html#cb586-1" aria-hidden="true" tabindex="-1"></a>M4 <span class="ot">=</span> M2 <span class="sc">%*%</span> M1</span>
<span id="cb586-2"><a href="r-basic-data-structures.html#cb586-2" aria-hidden="true" tabindex="-1"></a>M4</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]  103  136
## [2,]  130  172</code></pre>
<p>We can also apply some other R built-in functions to a matrix. For example:</p>
<ul>
<li><code>rowSums</code> will sum up all the elements for each row</li>
<li><code>colSums</code> will do the same by columns</li>
<li><code>rowMeans</code> will calculate the mean of each row (is the same for columns with <code>colMeans</code>)</li>
<li><code>summary</code> will show some statistics about the matrix by columns</li>
</ul>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="r-basic-data-structures.html#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(M4)</span></code></pre></div>
<pre><code>##        V1              V2     
##  Min.   :103.0   Min.   :136  
##  1st Qu.:109.8   1st Qu.:145  
##  Median :116.5   Median :154  
##  Mean   :116.5   Mean   :154  
##  3rd Qu.:123.2   3rd Qu.:163  
##  Max.   :130.0   Max.   :172</code></pre>
</div>
<div id="matrices-manipulation" class="section level4" number="2.7.9.4">
<h4><span class="header-section-number">2.7.9.4</span> Matrices Manipulation</h4>
<p>To add columns to a matrix you use the function <code>cbind(m1, m2, ...)</code>, which joins matrices and/or vectors per column.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="r-basic-data-structures.html#cb590-1" aria-hidden="true" tabindex="-1"></a>M5 <span class="ot">=</span> <span class="fu">cbind</span>(M1, M3)</span>
<span id="cb590-2"><a href="r-basic-data-structures.html#cb590-2" aria-hidden="true" tabindex="-1"></a>M5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2   36   39   42
## [2,]    3    4   82   89   96
## [3,]    5    6  128  139  150</code></pre>
<p>We can add just a new column:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="r-basic-data-structures.html#cb592-1" aria-hidden="true" tabindex="-1"></a>M5 <span class="ot">=</span> <span class="fu">cbind</span>(M5, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb592-2"><a href="r-basic-data-structures.html#cb592-2" aria-hidden="true" tabindex="-1"></a>M5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    2   36   39   42    1
## [2,]    3    4   82   89   96    2
## [3,]    5    6  128  139  150    3</code></pre>
<p>To add rows to a matrix you use the <code>rbind(m1, m2, ...)</code> function, which joins arrays and/or vectors per row.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="r-basic-data-structures.html#cb594-1" aria-hidden="true" tabindex="-1"></a>M5 <span class="ot">=</span> <span class="fu">rbind</span>(M2, M3)</span>
<span id="cb594-2"><a href="r-basic-data-structures.html#cb594-2" aria-hidden="true" tabindex="-1"></a>M5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10   11   12
## [2,]   13   14   15
## [3,]   36   39   42
## [4,]   82   89   96
## [5,]  128  139  150</code></pre>
<p>And we can add an extra row using the same function:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="r-basic-data-structures.html#cb596-1" aria-hidden="true" tabindex="-1"></a>M5 <span class="ot">=</span> <span class="fu">rbind</span>(M5, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb596-2"><a href="r-basic-data-structures.html#cb596-2" aria-hidden="true" tabindex="-1"></a>M5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10   11   12
## [2,]   13   14   15
## [3,]   36   39   42
## [4,]   82   89   96
## [5,]  128  139  150
## [6,]    1    2    3</code></pre>
</div>
<div id="indexing-matrices" class="section level4" number="2.7.9.5">
<h4><span class="header-section-number">2.7.9.5</span> Indexing Matrices</h4>
<p>As with vectors, we will use the square brackets <code>[ ]</code> to index matrices. In the particular case of matrices we will use two integers: one for the row and one for the column <code>[row, column]</code>.</p>
<p>To select all the elements of a row or a column, it is enough not to include any number before or after the comma, respectively. For example: <code>matrix[row, ]</code>; <code>matrix[, col]</code>.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="r-basic-data-structures.html#cb598-1" aria-hidden="true" tabindex="-1"></a>M1 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">byrow =</span> T, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb598-2"><a href="r-basic-data-structures.html#cb598-2" aria-hidden="true" tabindex="-1"></a>M1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<p>Let’s see some examples:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="r-basic-data-structures.html#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We select the first two rows</span></span>
<span id="cb600-2"><a href="r-basic-data-structures.html#cb600-2" aria-hidden="true" tabindex="-1"></a>M1[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8</code></pre>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="r-basic-data-structures.html#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We select the last column</span></span>
<span id="cb602-2"><a href="r-basic-data-structures.html#cb602-2" aria-hidden="true" tabindex="-1"></a>M1[, <span class="fu">ncol</span>(M1)]</span></code></pre></div>
<pre><code>## [1] 7 8 9</code></pre>
<p>As we did with vectors, we can use vectors to perform selections inside a matrix,</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="r-basic-data-structures.html#cb604-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the first and last columns</span></span>
<span id="cb604-2"><a href="r-basic-data-structures.html#cb604-2" aria-hidden="true" tabindex="-1"></a>M1[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="fu">ncol</span>(M1))]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    7
## [2,]    2    8
## [3,]    3    9</code></pre>
<p>and assign values to a specific position</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="r-basic-data-structures.html#cb606-1" aria-hidden="true" tabindex="-1"></a>M1[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb606-2"><a href="r-basic-data-structures.html#cb606-2" aria-hidden="true" tabindex="-1"></a>M1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<p>Finally, we can use logical expressions to select elements inside a matrix:</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="r-basic-data-structures.html#cb608-1" aria-hidden="true" tabindex="-1"></a>M1[M1 <span class="sc">&lt;</span> <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 0 2 3</code></pre>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="r-basic-data-structures.html#cb610-1" aria-hidden="true" tabindex="-1"></a>M1[M1 <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> M1 <span class="sc">&lt;</span> <span class="dv">8</span>]</span></code></pre></div>
<pre><code>## [1] 4 5 6 7</code></pre>
</div>
</div>
<div id="lists" class="section level3" number="2.7.10">
<h3><span class="header-section-number">2.7.10</span> Lists</h3>
<p>Lists are extremely important objects in R. You will have heard of the problems of ‘comparing apples and oranges’ or how two things are ‘as different as chalk and cheese.’ You can think of lists as a way of getting around these problems. Here are four completely different objects: a numeric vector, a logical vector, a vector of character strings and a vector of complex numbers:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="r-basic-data-structures.html#cb612-1" aria-hidden="true" tabindex="-1"></a>apples <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="fl">4.5</span>,<span class="fl">4.2</span>,<span class="fl">5.1</span>,<span class="fl">3.9</span>)</span>
<span id="cb612-2"><a href="r-basic-data-structures.html#cb612-2" aria-hidden="true" tabindex="-1"></a>oranges <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb612-3"><a href="r-basic-data-structures.html#cb612-3" aria-hidden="true" tabindex="-1"></a>chalk <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;limestone&quot;</span>, <span class="st">&quot;marl&quot;</span>,<span class="st">&quot;oolite&quot;</span>, <span class="st">&quot;CaC03&quot;</span>)</span>
<span id="cb612-4"><a href="r-basic-data-structures.html#cb612-4" aria-hidden="true" tabindex="-1"></a>cheese <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">3.2-4.5</span>i,<span class="fl">12.8+2.2</span>i)</span></code></pre></div>
<p>We cannot bundle them together into a dataframe, because the vectors are of different lengths. However, despite their differences, however, we can bundle them together in a single list called items:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="r-basic-data-structures.html#cb613-1" aria-hidden="true" tabindex="-1"></a>items <span class="ot">=</span> <span class="fu">list</span>(apples,oranges,chalk,cheese)</span>
<span id="cb613-2"><a href="r-basic-data-structures.html#cb613-2" aria-hidden="true" tabindex="-1"></a>items</span></code></pre></div>
<pre><code>## [[1]]
## [1] 4.0 4.5 4.2 5.1 3.9
## 
## [[2]]
## [1]  TRUE  TRUE FALSE
## 
## [[3]]
## [1] &quot;limestone&quot; &quot;marl&quot;      &quot;oolite&quot;    &quot;CaC03&quot;    
## 
## [[4]]
## [1]  3.2-4.5i 12.8+2.2i</code></pre>
<p>Subscripts on vectors, matrices, arrays and dataframes have one set of square brackets [6], [3,4] or [2,3,2,1], but subscripts on lists have double square brackets [[2]] or [[i,j]]. If we want to extract the chalk from the list, we use subscript [[3]]:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="r-basic-data-structures.html#cb615-1" aria-hidden="true" tabindex="-1"></a>items[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;limestone&quot; &quot;marl&quot;      &quot;oolite&quot;    &quot;CaC03&quot;</code></pre>
<p>If we want to extract the third element within chalk (oolite) then we use single subscripts after the double subscripts like this:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="r-basic-data-structures.html#cb617-1" aria-hidden="true" tabindex="-1"></a>items[[<span class="dv">3</span>]][<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;oolite&quot;</code></pre>
<p>There is another indexing convention in R which is used to extract named components from lists using the element names operator $. This is known as ‘indexing tagged lists.’ For this to work, the elements of the list must have names. At the moment our list called <code>items</code> has no names:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="r-basic-data-structures.html#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(items)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>You can give names to the elements of a list in the function that creates the list by using the equals sign like this:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="r-basic-data-structures.html#cb621-1" aria-hidden="true" tabindex="-1"></a>items <span class="ot">=</span> <span class="fu">list</span>(<span class="at">first=</span>apples,<span class="at">second=</span>oranges,<span class="at">third=</span>chalk,<span class="at">fourth=</span>cheese)</span></code></pre></div>
<p>Now you can extract elements of the list by name</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="r-basic-data-structures.html#cb622-1" aria-hidden="true" tabindex="-1"></a>items<span class="sc">$</span>fourth</span></code></pre></div>
<pre><code>## [1]  3.2-4.5i 12.8+2.2i</code></pre>
<div id="lapply-function" class="section level4" number="2.7.10.1">
<h4><span class="header-section-number">2.7.10.1</span> <code>lapply</code> function</h4>
<p>We can ask a variety of questions about our new list object:</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="r-basic-data-structures.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(items)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="r-basic-data-structures.html#cb626-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(items)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="r-basic-data-structures.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(items)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="r-basic-data-structures.html#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(items)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Note that the length of a list is the number of items in the list, not the lengths of the individual vectors within the list.</p>
<p>The function lapply applies a specified function to each of the elements of a list in turn (without the need for specifying a loop, and not requiring us to know how many elements there are in the list). A useful function to apply to lists is the length function; this asks how many elements comprise each component of the list. Technically we want to know the length of each of the vectors making up the list:</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="r-basic-data-structures.html#cb632-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(items, length)</span></code></pre></div>
<pre><code>## $first
## [1] 5
## 
## $second
## [1] 3
## 
## $third
## [1] 4
## 
## $fourth
## [1] 2</code></pre>
<p>This shows that items consists of four vectors, and shows that there were 5 elements in the first vector, 3 in the second 4 in the third and 2 in the fourth. But 5 of what, and 3 of what? To find out, we apply the function class to the list:</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="r-basic-data-structures.html#cb634-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(items, class)</span></code></pre></div>
<pre><code>## $first
## [1] &quot;numeric&quot;
## 
## $second
## [1] &quot;logical&quot;
## 
## $third
## [1] &quot;character&quot;
## 
## $fourth
## [1] &quot;complex&quot;</code></pre>
<p>So the answer is there were 5 numbers in the first vector, 3 logical variables in the second, 4 character strings in the third vector and 2 complex numbers in the fourth.</p>
<p>Applying numeric functions to lists will only work for objects of class <code>numeric</code> or <code>complex</code>, or objects (like logical values) that can be coerced into numbers. Here is what happens when we use <code>lapply</code> to apply the function <code>mean</code> to <code>items</code>:</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="r-basic-data-structures.html#cb636-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(items, mean)</span></code></pre></div>
<pre><code>## Warning in mean.default(X[[i]], ...): argument is not numeric or logical:
## returning NA</code></pre>
<pre><code>## $first
## [1] 4.34
## 
## $second
## [1] 0.6666667
## 
## $third
## [1] NA
## 
## $fourth
## [1] 8-1.15i</code></pre>
<p>Finally, the most useful overview of the contents of a list is obtained with str, the structure function:</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="r-basic-data-structures.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(items)</span></code></pre></div>
<pre><code>## List of 4
##  $ first : num [1:5] 4 4.5 4.2 5.1 3.9
##  $ second: logi [1:3] TRUE TRUE FALSE
##  $ third : chr [1:4] &quot;limestone&quot; &quot;marl&quot; &quot;oolite&quot; &quot;CaC03&quot;
##  $ fourth: cplx [1:2] 3.2-4.5i 12.8+2.2i</code></pre>
</div>
</div>
<div id="data-frames" class="section level3" number="2.7.11">
<h3><span class="header-section-number">2.7.11</span> Data Frames</h3>
<p>Data frame is a two dimensional data structure in R. It is a special case of a list which has each component of equal length.</p>
<div id="check-if-a-variable-is-a-data-frame-or-not" class="section level4" number="2.7.11.1">
<h4><span class="header-section-number">2.7.11.1</span> Check if a variable is a data frame or not</h4>
<p>We can check if a variable is a data frame or not using the <code>class()</code> function.</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="r-basic-data-structures.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="r-basic-data-structures.html#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>In this example, x can be considered as a list of 3 components with each component having a two element vector.</p>
</div>
<div id="functions-of-data-frame" class="section level4" number="2.7.11.2">
<h4><span class="header-section-number">2.7.11.2</span> Functions of data frame</h4>
<p>Here you have some useful functions we can use to have a better understanding about the content we have inside our data frame:</p>
<ul>
<li>We can check the names of the variables using the <code>names()</code> function</li>
</ul>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="r-basic-data-structures.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;SN&quot;     &quot;Age&quot;    &quot;Gender&quot;</code></pre>
<ul>
<li>We can know the number of columns and rows we have in our data frame (the <code>length()</code> function will return also the number of columns, it is taking the number of elements we are storing in the underlying list, which are the column vectors):</li>
</ul>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="r-basic-data-structures.html#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="r-basic-data-structures.html#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="r-basic-data-structures.html#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<ul>
<li>The <code>str()</code> and the <code>summary()</code> are the most useful functions to understand our data frames:</li>
</ul>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="r-basic-data-structures.html#cb653-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  3 variables:
##  $ SN    : int  1 2
##  $ Age   : num  21 15
##  $ Gender: chr  &quot;Male&quot; &quot;Female&quot;</code></pre>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="r-basic-data-structures.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##        SN            Age          Gender         
##  Min.   :1.00   Min.   :15.0   Length:2          
##  1st Qu.:1.25   1st Qu.:16.5   Class :character  
##  Median :1.50   Median :18.0   Mode  :character  
##  Mean   :1.50   Mean   :18.0                     
##  3rd Qu.:1.75   3rd Qu.:19.5                     
##  Max.   :2.00   Max.   :21.0</code></pre>
</div>
<div id="how-to-create-a-data-frame" class="section level4" number="2.7.11.3">
<h4><span class="header-section-number">2.7.11.3</span> How to create a data frame</h4>
<p>We can create a data frame using the <code>data.frame()</code> function. Below you can see how to create the data frame we are using for all the previous examples:</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="r-basic-data-structures.html#cb657-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="st">&quot;SN&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="st">&quot;Age&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">15</span>), <span class="st">&quot;Gender&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;Female&quot;</span>))</span></code></pre></div>
<p>Let’s take another look to the data frame structure:</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="r-basic-data-structures.html#cb658-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  3 variables:
##  $ SN    : int  1 2
##  $ Age   : num  21 15
##  $ Gender: chr  &quot;Male&quot; &quot;Female&quot;</code></pre>
<p>Which is the type of the <code>Gender</code> variable? Do we need to change it? It is a character vector and, in order to use this variable in future models we will need to transform it into a factor. Remember that R3 automatically converts all the characters into factors, but we need to define those in R4.</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="r-basic-data-structures.html#cb660-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="st">&quot;SN&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="st">&quot;Age&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">15</span>), <span class="st">&quot;Gender&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;Female&quot;</span>), <span class="at">stringsAsFactors =</span> T)</span>
<span id="cb660-2"><a href="r-basic-data-structures.html#cb660-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  3 variables:
##  $ SN    : int  1 2
##  $ Age   : num  21 15
##  $ Gender: chr  &quot;Male&quot; &quot;Female&quot;</code></pre>
<p><strong>NOTE</strong>: Many data input functions of R like, <code>read.table()</code>, <code>read.csv()</code>, <code>read.delim()</code>, <code>read.fwf()</code> also read data into a data frame.</p>
</div>
<div id="how-to-access-components-of-a-data-frame" class="section level4" number="2.7.11.4">
<h4><span class="header-section-number">2.7.11.4</span> How to access components of a data frame</h4>
<p>Components of data frame can be accessed like a list or like a matrix.</p>
<div id="accessing-like-a-list" class="section level5" number="2.7.11.4.1">
<h5><span class="header-section-number">2.7.11.4.1</span> Accessing like a list</h5>
<p>We can use either <code>[</code>, <code>[[</code> or <code>$</code> operator to access columns of data frame.</p>
<p>Accessing with <code>[[</code> or <code>$</code> is similar. However, it differs for <code>[</code> in that, indexing with <code>[</code> will return us a data frame but the other two will reduce it into a vector.</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="r-basic-data-structures.html#cb662-1" aria-hidden="true" tabindex="-1"></a>x[<span class="st">&quot;Gender&quot;</span>]</span></code></pre></div>
<pre><code>##   Gender
## 1   Male
## 2 Female</code></pre>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="r-basic-data-structures.html#cb664-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>Age</span></code></pre></div>
<pre><code>## [1] 21 15</code></pre>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="r-basic-data-structures.html#cb666-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="st">&quot;Gender&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;Male&quot;   &quot;Female&quot;</code></pre>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="r-basic-data-structures.html#cb668-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   Age
## 1  21
## 2  15</code></pre>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="r-basic-data-structures.html#cb670-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;Male&quot;   &quot;Female&quot;</code></pre>
</div>
<div id="accessing-like-a-matrix" class="section level5" number="2.7.11.4.2">
<h5><span class="header-section-number">2.7.11.4.2</span> Accessing like a matrix</h5>
<p>Data frames can be accessed like a matrix by providing index for row and column.</p>
<p>To illustrate this, we use datasets already available in R. Datasets that are available can be listed with the command <code>library(help = "datasets")</code>.</p>
<p>We will use the <code>trees</code> dataset which contains <code>Girth</code>, <code>Height</code> and <code>Volume</code> for Black Cherry Trees.</p>
<p>A data frame can be examined using functions like <code>str()</code> and <code>head()</code>.</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="r-basic-data-structures.html#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(trees)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    31 obs. of  3 variables:
##  $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...
##  $ Height: num  70 65 63 72 81 83 66 75 80 75 ...
##  $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</code></pre>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="r-basic-data-structures.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   Girth Height Volume
## 1   8.3     70   10.3
## 2   8.6     65   10.3
## 3   8.8     63   10.2</code></pre>
<p>We can see that trees is a data frame with 31 rows and 3 columns. We also display the first 3 rows of the data frame.</p>
<p>Now we proceed to access the data frame like a matrix.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="r-basic-data-structures.html#cb676-1" aria-hidden="true" tabindex="-1"></a>trees[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>,]    <span class="co"># select 2nd and 3rd row</span></span></code></pre></div>
<pre><code>##   Girth Height Volume
## 2   8.6     65   10.3
## 3   8.8     63   10.2</code></pre>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="r-basic-data-structures.html#cb678-1" aria-hidden="true" tabindex="-1"></a>trees[trees<span class="sc">$</span>Height <span class="sc">&gt;</span> <span class="dv">82</span>,]    <span class="co"># selects rows with Height greater than 82</span></span></code></pre></div>
<pre><code>##    Girth Height Volume
## 6   10.8     83   19.7
## 17  12.9     85   33.8
## 18  13.3     86   27.4
## 31  20.6     87   77.0</code></pre>
</div>
</div>
<div id="how-to-modify-a-data-frame" class="section level4" number="2.7.11.5">
<h4><span class="header-section-number">2.7.11.5</span> How to modify a Data Frame</h4>
<p>Data frames can be modified like we modified matrices through reassignment.</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="r-basic-data-structures.html#cb680-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>,<span class="st">&quot;Age&quot;</span>] <span class="ot">=</span> <span class="dv">20</span>; x</span></code></pre></div>
<pre><code>##   SN Age Gender
## 1  1  20   Male
## 2  2  15 Female</code></pre>
<div id="adding-components" class="section level5" number="2.7.11.5.1">
<h5><span class="header-section-number">2.7.11.5.1</span> Adding Components</h5>
<p>Rows can be added to a data frame using the <code>rbind()</code> function.</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="r-basic-data-structures.html#cb682-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">rbind</span>(x,<span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">16</span>,<span class="st">&quot;Female&quot;</span>)))</span></code></pre></div>
<pre><code>##   SN Age Gender
## 1  1  20   Male
## 2  2  15 Female
## 3  1  16 Female</code></pre>
<p>Similarly, we can add columns using <code>cbind()</code>.</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="r-basic-data-structures.html#cb684-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">cbind</span>(x,<span class="at">State=</span><span class="fu">c</span>(<span class="st">&quot;NY&quot;</span>,<span class="st">&quot;FL&quot;</span>)))</span></code></pre></div>
<pre><code>##   SN Age Gender State
## 1  1  20   Male    NY
## 2  2  15 Female    FL</code></pre>
<p>Since data frames are implemented as list, we can also add new columns through simple list-like assignments.</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="r-basic-data-structures.html#cb686-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>State <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;NY&quot;</span>,<span class="st">&quot;FL&quot;</span>); x</span></code></pre></div>
<pre><code>##   SN Age Gender State
## 1  1  20   Male    NY
## 2  2  15 Female    FL</code></pre>
</div>
<div id="deleting-components" class="section level5" number="2.7.11.5.2">
<h5><span class="header-section-number">2.7.11.5.2</span> Deleting Components</h5>
<p>Data frame columns can be deleted by assigning <code>NULL</code> to it.</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="r-basic-data-structures.html#cb688-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>State <span class="ot">=</span> <span class="cn">NULL</span>; x</span></code></pre></div>
<pre><code>##   SN Age Gender
## 1  1  20   Male
## 2  2  15 Female</code></pre>
<p>Similarly, rows can be deleted through reassignments.</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb690-1"><a href="r-basic-data-structures.html#cb690-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> x[<span class="sc">-</span><span class="dv">1</span>,]; x</span></code></pre></div>
<pre><code>##   SN Age Gender
## 2  2  15 Female</code></pre>
</div>
</div>
<div id="exporting-a-data-frame" class="section level4" number="2.7.11.6">
<h4><span class="header-section-number">2.7.11.6</span> Exporting a data frame</h4>
<p>As we have mentioned before, any data table we import in R will take the form of a data frame by default. This facilitates us enormously the work of data cleaning since there are many libraries that work on data frames and will help us in this process. We will see many of these resources in the “Data Wrangling” module.</p>
<p>For now, we only need some knowledge of importing and exporting data tables in R. Let’s start with a built-in dataframe like <code>trees</code>.</p>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="r-basic-data-structures.html#cb692-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   Girth Height Volume
## 1   8.3     70   10.3
## 2   8.6     65   10.3
## 3   8.8     63   10.2</code></pre>
<p>This dataframe can be exported in different formats, but let’s see only the two main ones that we will use in R, .csv and .txt. The basic function in R for exporting data is called <code>write.table()</code>, and it has a lot of parameters. My recommendation is that you take a look at the documentation of this function to familiarize yourself with it.</p>
<p>The main parameters of the <code>write.table()</code> function are</p>
<ul>
<li><code>x</code>: will be the object we want to export, in this case a data frame</li>
<li><code>file</code>: is the name of the file to be exported. In this argument we can also enter a path to organize the file in our OS. The file will take the extension that we indicate in its name.</li>
<li><code>append</code>: we will use it if the file already exists and we want to add new information. By default it is <code>FALSE</code>.</li>
<li><code>quote</code>: by default it is also <code>FALSE.</code> If you set it to <code>TRUE</code> this parameter will return the factors and strings with quotes</li>
<li><code>sep</code>: in this parameter we can decide how to separate the columns of our file. The default is a comma.</li>
<li><code>dec</code>: this parameter will allow us to change the symbol of the decimals that by default is a dot.</li>
<li>…</li>
</ul>
<p>Let’s see an example. Next we are going to export the data frame <code>trees</code> as a .txt file.</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="r-basic-data-structures.html#cb694-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(<span class="at">x =</span> trees, <span class="at">file =</span> <span class="st">&quot;./Data/trees.txt&quot;</span>, <span class="at">quote =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="at">dec =</span> <span class="st">&quot;,&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Although the function <code>write.table()</code> already provides a simple method to export data tables, we can also use the function <code>write.csv()</code>, which will facilitate the export of .csv files with a predetermined format to facilitate their subsequent use.</p>
<p>This function <code>write.csv()</code> or <code>write.csv2()</code> (a second version that has different default parameters) use as a base the <code>write.table()</code> function, so its behavior is practically the same.</p>
<p>Let’s see the same example, but exporting the file in this case as a .csv:</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb695-1"><a href="r-basic-data-structures.html#cb695-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> trees, <span class="at">file =</span> <span class="st">&quot;./Data/trees.csv&quot;</span>)</span>
<span id="cb695-2"><a href="r-basic-data-structures.html#cb695-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv2</span>(<span class="at">x =</span> trees, <span class="at">file =</span> <span class="st">&quot;./Data/trees2.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="importing-a-data-frame" class="section level4" number="2.7.11.7">
<h4><span class="header-section-number">2.7.11.7</span> Importing a data frame</h4>
<p>When importing data tables the operation will be exactly the same. In this case, the basic function of R is <code>read.table()</code>, and the functions <code>read.csv()</code> and <code>read.csv2()</code> use the previous one to define other behaviors focused on reading .csv files.</p>
<p>The parameters of <code>read.table()</code> are the same as those of write.table() with some exceptions.</p>
<ul>
<li><code>header</code>: is a logical parameter (TRUE/FALSE) that indicates if the file contains a header.</li>
<li><code>quote</code>: it is not a logical parameter anymore, but it allows us to decide how we want to code the quotes.</li>
<li><code>row.names</code> and <code>col.names</code>: they also existed in the previous function but in this case they make more sense. These parameters will take a vector the size of the number of rows or columns respectively, and set it as such in the data frame</li>
<li><code>na.strings</code>: logical vector that by default is FALSE, and assigns as NA’s to all character type elements.</li>
<li><code>skip</code>: is a parameter that will skip the number of lines of the data table that we indicate with an integer.</li>
<li><code>stringsAsFactors</code>: logical vector that by default is FALSE and helps us to code the character type vectors as factors. In some cases it will be useful, but in others we prefer to have the versatility that character vectors offer.</li>
</ul>
<p>Let’s see how to import the files that we have previously exported with the <code>read.table()</code> function:</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="r-basic-data-structures.html#cb696-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;./Data/trees.txt&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="at">dec =</span> <span class="st">&quot;,&quot;</span>, </span>
<span id="cb696-2"><a href="r-basic-data-structures.html#cb696-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">na.strings =</span> <span class="cn">FALSE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb696-3"><a href="r-basic-data-structures.html#cb696-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    31 obs. of  3 variables:
##  $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...
##  $ Height: int  70 65 63 72 81 83 66 75 80 75 ...
##  $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</code></pre>
<p>In the case of the functions <code>read.csv()</code> and r<code>ead.csv2()</code> we can ensure that the format in which we have exported the files will be the same as that in which we should read it:</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="r-basic-data-structures.html#cb698-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;./Data/trees.csv&quot;</span>)</span>
<span id="cb698-2"><a href="r-basic-data-structures.html#cb698-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    31 obs. of  4 variables:
##  $ X     : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...
##  $ Height: int  70 65 63 72 81 83 66 75 80 75 ...
##  $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</code></pre>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="r-basic-data-structures.html#cb700-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">=</span> <span class="fu">read.csv2</span>(<span class="at">file =</span> <span class="st">&quot;./Data/trees2.csv&quot;</span>)</span>
<span id="cb700-2"><a href="r-basic-data-structures.html#cb700-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df2)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    31 obs. of  4 variables:
##  $ X     : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...
##  $ Height: int  70 65 63 72 81 83 66 75 80 75 ...
##  $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-basic-data-types.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="control-flow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/alejandrommingo/SMUCbook/blob/master/02-R.Rmd",
"text": null
},
"download": ["bookdownproj.pdf", "bookdownproj.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
